/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal,htmx,drupalSettings,loadjs){Drupal.htmx={mergeSettings(current,...sources){if(!current)return {};sources.filter((obj)=>Boolean(obj)).forEach((obj)=>{Object.entries(obj).forEach(([key,value])=>{switch(Object.prototype.toString.call(value)){case '[object Object]':current[key]=current[key]||{};current[key]=Drupal.htmx.mergeSettings(current[key],value);break;case '[object Array]':current[key]=Drupal.htmx.mergeSettings(new Array(value.length),value);break;default:current[key]=value;}});});return current;},addAssets(data){const bundleIds=data.filter(({href,src})=>!loadjs.isDefined(href??src)).map(({href,src,type,...attributes})=>{const bundleId=href??src;let prefix='css!';if(src)prefix=type==='module'?'module!':'';loadjs(prefix+bundleId,bundleId,{async:!src,before(path,element){Object.entries(attributes).forEach(([name,value])=>{element.setAttribute(name,value);});}});return bundleId;});let assetsLoaded=Promise.resolve();if(bundleIds.length)assetsLoaded=new Promise((resolve,reject)=>{loadjs.ready(bundleIds,{success:resolve,error(depsNotFound){const message=Drupal.t(`The following files could not be loaded: @dependencies`,{'@dependencies':depsNotFound.join(', ')});reject(message);}});});return assetsLoaded;}};})(Drupal,htmx,drupalSettings,loadjs);;
(function(Drupal,drupalSettings,htmx){const requestAssetsLoaded=new WeakMap();htmx.on('htmx:beforeRequest',({detail})=>{requestAssetsLoaded.set(detail.xhr,Promise.resolve());});htmx.on('htmx:configRequest',({detail})=>{if(Drupal.url.isLocal(detail.path)){if(detail.elt.hasAttribute('data-hx-drupal-only-main-content')){const url=new URL(detail.path,window.location);url.searchParams.set('_wrapper_format','drupal_htmx');detail.path=url.toString();}const pageState=drupalSettings.ajaxPageState;detail.parameters['ajax_page_state[theme]']=pageState.theme;detail.parameters['ajax_page_state[theme_token]']=pageState.theme_token;detail.parameters['ajax_page_state[libraries]']=pageState.libraries;if(detail.headers['HX-Trigger-Name'])detail.parameters._triggering_element_name=detail.headers['HX-Trigger-Name'];}});htmx.on('htmx:beforeHistoryUpdate',({detail})=>{const url=new URL(detail.history.path,window.location);['_wrapper_format','ajax_page_state[theme]','ajax_page_state[theme_token]','ajax_page_state[libraries]','_triggering_element_name','_triggering_element_value'].forEach((key)=>{url.searchParams.delete(key);});detail.history.path=url.toString();});htmx.on('htmx:beforeSwap',({detail})=>{htmx.trigger(detail.elt,'htmx:drupal:unload');if(!detail.xhr)return;let responseHTML=Document.parseHTMLUnsafe(detail.serverResponse);const settingsElement=responseHTML.querySelector(':is(head, body) > script[type="application/json"][data-drupal-selector="drupal-settings-json"]');settingsElement?.remove();if(settingsElement!==null)Drupal.htmx.mergeSettings(drupalSettings,JSON.parse(settingsElement.textContent));const assetsElements=responseHTML.querySelectorAll('link[rel="stylesheet"][href], script[src]');assetsElements.forEach((element)=>element.remove());const data=Array.from(assetsElements).map(({attributes})=>{const attrs={};Object.values(attributes).forEach(({name,value})=>{attrs[name]=value;});return attrs;});detail.serverResponse=responseHTML.documentElement.outerHTML;responseHTML=null;requestAssetsLoaded.get(detail.xhr).then(()=>Drupal.htmx.addAssets(data));});htmx.on('htmx:afterSettle',({detail})=>{(requestAssetsLoaded.get(detail.xhr)||Promise.resolve()).then(()=>{htmx.trigger(detail.elt.parentNode,'htmx:drupal:load');requestAssetsLoaded.delete(detail.xhr);});});})(Drupal,drupalSettings,htmx);;
(function(Drupal,htmx,drupalSettings){let attachFromHtmx=false;htmx.on('htmx:drupal:load',({detail})=>{attachFromHtmx=true;Drupal.attachBehaviors(detail.elt,drupalSettings);attachFromHtmx=false;});htmx.on('htmx:drupal:unload',({detail})=>{Drupal.detachBehaviors(detail.elt,drupalSettings,'unload');});Drupal.behaviors.htmx={attach(context){if(!attachFromHtmx&&context!==document)htmx.process(context);}};})(Drupal,htmx,drupalSettings);;
((Drupal,drupalSettings,htmx)=>{Drupal.bigPipe={};Drupal.bigPipe.commandExecutionQueue=function(response,status){const ajaxCommands=Drupal.bigPipe.commands;return Object.keys(response||{}).reduce((executionQueue,key)=>executionQueue.then(()=>{const {command}=response[key];if(command&&ajaxCommands[command])return ajaxCommands[command](response[key],status);}),Promise.resolve());};Drupal.bigPipe.commands={insert({data,method,selector}){const target=htmx.find(selector);if(target===null)return;htmx.trigger(target,'htmx:drupal:unload');const styleMap={replaceWith:'outerHTML',html:'innerHTML',before:'beforebegin',prepend:'afterbegin',append:'beforeend',after:'afterend'};htmx.swap(target,data,{swapStyle:styleMap[method]||'outerHTML'});},redirect({url}){window.location=url;},settings({merge,settings}){if(merge)Drupal.htmx.mergeSettings(drupalSettings,settings);},add_css({data}){return Drupal.htmx.addAssets(data);},message({message,messageOptions,messageWrapperQuerySelector,clearPrevious}){const messages=new Drupal.Message(document.querySelector(messageWrapperQuerySelector));if(clearPrevious)messages.clear();messages.add(message,messageOptions);},add_js({data}){return Drupal.htmx.addAssets(data).then(()=>{htmx.trigger(document.body,'htmx:drupal:load');});}};})(Drupal,drupalSettings,htmx);;
((Drupal,drupalSettings)=>{const replacementsSelector=`script[data-big-pipe-replacement-for-placeholder-with-id]`;function mapTextContentToAjaxResponse(content){if(content==='')return false;try{return JSON.parse(content);}catch(e){return false;}}function processReplacement(replacement){const id=replacement.dataset.bigPipeReplacementForPlaceholderWithId;const content=replacement.textContent.trim();if(typeof drupalSettings.bigPipePlaceholderIds[id]==='undefined')return;const response=mapTextContentToAjaxResponse(content);if(response===false)return;delete drupalSettings.bigPipePlaceholderIds[id];Drupal.bigPipe.commandExecutionQueue(response,'success');}function checkMutation(node){return Boolean(node.nodeType===Node.ELEMENT_NODE&&node.nodeName==='SCRIPT'&&node.dataset?.bigPipeReplacementForPlaceholderWithId&&typeof drupalSettings.bigPipePlaceholderIds[node.dataset.bigPipeReplacementForPlaceholderWithId]!=='undefined');}function checkMutationAndProcess(node){if(checkMutation(node))processReplacement(node);else{if(node.parentNode!==null&&checkMutation(node.parentNode))processReplacement(node.parentNode);}}function processMutations(mutations){mutations.forEach(({addedNodes,type,target})=>{addedNodes.forEach(checkMutationAndProcess);if(type==='characterData'&&checkMutation(target.parentNode)&&drupalSettings.bigPipePlaceholderIds[target.parentNode.dataset.bigPipeReplacementForPlaceholderWithId]===true)processReplacement(target.parentNode);});}const observer=new MutationObserver(processMutations);Drupal.attachBehaviors(document);document.querySelectorAll(replacementsSelector).forEach(processReplacement);observer.observe(document.body,{childList:true,subtree:true,characterData:true});window.addEventListener('DOMContentLoaded',()=>{const mutations=observer.takeRecords();observer.disconnect();if(mutations.length)processMutations(mutations);});})(Drupal,drupalSettings);;
(function($,Drupal,{tabbable,isTabbable}){function TabbingManager(){this.stack=[];}function TabbingContext(options){$.extend(this,{level:null,$tabbableElements:$(),$disabledElements:$(),released:false,active:false,trapFocus:false},options);}$.extend(TabbingManager.prototype,{constrain(elements,{trapFocus=false}={}){const il=this.stack.length;for(let i=0;i<il;i++)this.stack[i].deactivate();let tabbableElements=[];$(elements).each((index,rootElement)=>{tabbableElements=[...tabbableElements,...tabbable(rootElement)];if(isTabbable(rootElement))tabbableElements=[...tabbableElements,rootElement];});const tabbingContext=new TabbingContext({level:this.stack.length,$tabbableElements:$(tabbableElements),trapFocus});this.stack.push(tabbingContext);tabbingContext.activate();$(document).trigger('drupalTabbingConstrained',tabbingContext);return tabbingContext;},release(){let toActivate=this.stack.length-1;while(toActivate>=0&&this.stack[toActivate].released)toActivate--;this.stack.splice(toActivate+1);if(toActivate>=0)this.stack[toActivate].activate();},activate(tabbingContext){const $set=tabbingContext.$tabbableElements;const level=tabbingContext.level;const $disabledSet=$(tabbable(document.body)).not($set);tabbingContext.$disabledElements=$disabledSet;const il=$disabledSet.length;for(let i=0;i<il;i++)this.recordTabindex($disabledSet.eq(i),level);$disabledSet.prop('tabindex',-1).prop('autofocus',false);let $hasFocus=$set.filter('[autofocus]').eq(-1);if($hasFocus.length===0)$hasFocus=$set.eq(0);$hasFocus.trigger('focus');if($set.length&&tabbingContext.trapFocus){$set.last().on('keydown.focus-trap',(event)=>{if(event.key==='Tab'&&!event.shiftKey){event.preventDefault();$set.first().focus();}});$set.first().on('keydown.focus-trap',(event)=>{if(event.key==='Tab'&&event.shiftKey){event.preventDefault();$set.last().focus();}});}},deactivate(tabbingContext){const $set=tabbingContext.$disabledElements;const level=tabbingContext.level;const il=$set.length;tabbingContext.$tabbableElements.first().off('keydown.focus-trap');tabbingContext.$tabbableElements.last().off('keydown.focus-trap');for(let i=0;i<il;i++)this.restoreTabindex($set.eq(i),level);},recordTabindex($el,level){const tabInfo=$el.data('drupalOriginalTabIndices')||{};tabInfo[level]={tabindex:$el[0].getAttribute('tabindex'),autofocus:$el[0].hasAttribute('autofocus')};$el.data('drupalOriginalTabIndices',tabInfo);},restoreTabindex($el,level){const tabInfo=$el.data('drupalOriginalTabIndices');if(tabInfo&&tabInfo[level]){const data=tabInfo[level];if(data.tabindex)$el[0].setAttribute('tabindex',data.tabindex);else $el[0].removeAttribute('tabindex');if(data.autofocus)$el[0].setAttribute('autofocus','autofocus');if(level===0)$el.removeData('drupalOriginalTabIndices');else{let levelToDelete=level;while(tabInfo.hasOwnProperty(levelToDelete)){delete tabInfo[levelToDelete];levelToDelete++;}$el.data('drupalOriginalTabIndices',tabInfo);}}}});$.extend(TabbingContext.prototype,{release(){if(!this.released){this.deactivate();this.released=true;Drupal.tabbingManager.release(this);$(document).trigger('drupalTabbingContextReleased',this);}},activate(){if(!this.active&&!this.released){this.active=true;Drupal.tabbingManager.activate(this);$(document).trigger('drupalTabbingContextActivated',this);}},deactivate(){if(this.active){this.active=false;Drupal.tabbingManager.deactivate(this);$(document).trigger('drupalTabbingContextDeactivated',this);}}});if(Drupal.tabbingManager)return;Drupal.tabbingManager=new TabbingManager();})(jQuery,Drupal,window.tabbable);;
(($,Drupal)=>{Drupal.contextual.ContextualToolbarModelView=class{constructor(options){this.strings=options.strings;this.isVisible=false;this._contextualCount=Drupal.contextual.instances.count;this.tabbingContext=null;this._isViewing=localStorage.getItem('Drupal.contextualToolbar.isViewing')!=='false';this.$el=options.el;window.addEventListener('contextual-instances-added',()=>this.lockNewContextualLinks());window.addEventListener('contextual-instances-removed',()=>{this.contextualCount=Drupal.contextual.instances.count;});this.$el.on({click:()=>{this.isViewing=!this.isViewing;},touchend:(event)=>{event.preventDefault();event.target.click();},'click touchend':()=>this.render()});$(document).on('keyup',(event)=>this.onKeypress(event));this.manageTabbing(true);this.render();}onKeypress(event){if(!this.announcedOnce&&event.keyCode===9&&!this.isViewing){this.announceTabbingConstraint();this.announcedOnce=true;}if(event.keyCode===27)this.isViewing=true;}render(){this.$el[0].classList.toggle('hidden',this.isVisible);const button=this.$el[0].querySelector('button');button.classList.toggle('is-active',!this.isViewing);button.setAttribute('aria-pressed',!this.isViewing);this.contextualCount=Drupal.contextual.instances.count;}updateVisibility(){this.isVisible=this.get('contextualCount')>0;}lockNewContextualLinks(){Drupal.contextual.instances.forEach((model)=>{model.isLocked=!this.isViewing;});this.contextualCount=Drupal.contextual.instances.count;}manageTabbing(init=false){let {tabbingContext}=this;if(tabbingContext&&!init){if(tabbingContext.active)Drupal.announce(this.strings.tabbingReleased);tabbingContext.release();this.tabbingContext=null;}if(!this.isViewing){tabbingContext=Drupal.tabbingManager.constrain($('.contextual-toolbar-tab, .contextual'));this.tabbingContext=tabbingContext;this.announceTabbingConstraint();this.announcedOnce=true;}}announceTabbingConstraint(){const {strings}=this;Drupal.announce(Drupal.formatString(strings.tabbingConstrained,{'@contextualsCount':Drupal.formatPlural(Drupal.contextual.instances.length,'@count contextual link','@count contextual links')})+strings.pressEsc);}get isViewing(){return this._isViewing;}set isViewing(value){this._isViewing=value;localStorage[!value?'setItem':'removeItem']('Drupal.contextualToolbar.isViewing','false');Drupal.contextual.instances.forEach((model)=>{model.isLocked=!this.isViewing;});this.manageTabbing();}get contextualCount(){return this._contextualCount;}set contextualCount(value){if(value!==this._contextualCount){this._contextualCount=value;this.updateVisibility();}}};})(jQuery,Drupal);;
(function($,Drupal){const strings={tabbingReleased:Drupal.t('Tabbing is no longer constrained by the Contextual module.'),tabbingConstrained:Drupal.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.'),pressEsc:Drupal.t('Press the esc key to exit.')};function initContextualToolbar(context){if(!Drupal.contextual||!Drupal.contextual.instances)return;const {contextualToolbar}=Drupal;const viewOptions={el:$('.toolbar .toolbar-bar .contextual-toolbar-tab'),strings};contextualToolbar.model=new Drupal.contextual.ContextualToolbarModelView(viewOptions);}Drupal.behaviors.contextualToolbar={attach(context){if(once('contextualToolbar-init','body').length)initContextualToolbar(context);}};Drupal.contextualToolbar={model:null};})(jQuery,Drupal);;
(function(Drupal,drupalSettings){Drupal.behaviors.activeLinks={attach(context){const path=drupalSettings.path;const queryString=JSON.stringify(path.currentQuery);const querySelector=queryString?`[data-drupal-link-query="${CSS.escape(queryString)}"]`:':not([data-drupal-link-query])';const originalSelectors=[`[data-drupal-link-system-path="${CSS.escape(path.currentPath)}"]`];let selectors;if(path.isFront)originalSelectors.push('[data-drupal-link-system-path="<front>"]');selectors=[].concat(originalSelectors.map((selector)=>`${selector}:not([data-drupal-language]):not([hreflang])`),originalSelectors.map((selector)=>`li${selector}[data-drupal-language="${path.currentLanguage}"]`),originalSelectors.map((selector)=>`a${selector}[hreflang="${path.currentLanguage}"]`));selectors=selectors.map((current)=>current+querySelector);context.querySelectorAll(selectors.join(',')).forEach((activeLink)=>{activeLink.classList.add('is-active');activeLink.setAttribute('aria-current','page');});},detach(context,settings,trigger){if(trigger==='unload')context.querySelectorAll('[data-drupal-link-system-path].is-active').forEach((activeLink)=>{activeLink.classList.remove('is-active');activeLink.removeAttribute('aria-current');});}};})(Drupal,drupalSettings);;
(function($,Drupal,debounce){$.fn.drupalGetSummary=function(){const callback=this.data('summaryCallback');if(!this[0]||!callback)return '';const result=callback(this[0]);return result?result.trim():'';};$.fn.drupalSetSummary=function(callback){const self=this;if(typeof callback!=='function'){const val=callback;callback=function(){return val;};}return (this.data('summaryCallback',callback).off('formUpdated.summary').on('formUpdated.summary',()=>{self.trigger('summaryUpdated');}).trigger('summaryUpdated'));};Drupal.behaviors.formSingleSubmit={attach(){function onFormSubmit(e){const $form=$(e.currentTarget);const formValues=new URLSearchParams(new FormData(e.target)).toString();const previousValues=$form.attr('data-drupal-form-submit-last');if(previousValues===formValues)e.preventDefault();else $form.attr('data-drupal-form-submit-last',formValues);}$(once('form-single-submit','body')).on('submit.singleSubmit','form:not([method~="GET"])',onFormSubmit);}};function triggerFormUpdated(element){$(element).trigger('formUpdated');}function fieldsList(form){return [].map.call(form.querySelectorAll('[name][id]'),(el)=>el.id);}Drupal.behaviors.formUpdated={attach(context){const $context=$(context);const contextIsForm=context.tagName==='FORM';const $forms=$(once('form-updated',contextIsForm?$context:$context.find('form')));let formFields;if($forms.length)$.makeArray($forms).forEach((form)=>{const events='change.formUpdated input.formUpdated ';const eventHandler=debounce((event)=>{triggerFormUpdated(event.target);},300);formFields=fieldsList(form).join(',');form.setAttribute('data-drupal-form-fields',formFields);$(form).on(events,eventHandler);});if(contextIsForm){formFields=fieldsList(context).join(',');const currentFields=$(context).attr('data-drupal-form-fields');if(formFields!==currentFields)triggerFormUpdated(context);}},detach(context,settings,trigger){const $context=$(context);const contextIsForm=context.tagName==='FORM';if(trigger==='unload')once.remove('form-updated',contextIsForm?$context:$context.find('form')).forEach((form)=>{form.removeAttribute('data-drupal-form-fields');$(form).off('.formUpdated');});}};Drupal.behaviors.fillUserInfoFromBrowser={attach(context,settings){const userInfo=['name','mail','homepage'];const $forms=$(once('user-info-from-browser','[data-user-info-from-browser]'));if($forms.length)userInfo.forEach((info)=>{const $element=$forms.find(`[name=${info}]`);const browserData=localStorage.getItem(`Drupal.visitor.${info}`);if(!$element.length)return;const emptyValue=$element[0].value==='';const defaultValue=$element.attr('data-drupal-default-value')===$element[0].value;if(browserData&&(emptyValue||defaultValue))$element.each(function(index,item){item.value=browserData;});});$forms.on('submit',()=>{userInfo.forEach((info)=>{const $element=$forms.find(`[name=${info}]`);if($element.length)localStorage.setItem(`Drupal.visitor.${info}`,$element[0].value);});});}};const handleFragmentLinkClickOrHashChange=(e)=>{let url;if(e.type==='click')url=e.currentTarget.location?e.currentTarget.location:e.currentTarget;else url=window.location;const hash=url.hash.substring(1);if(hash){const $target=$(`#${hash}`);$('body').trigger('formFragmentLinkClickOrHashChange',[$target]);setTimeout(()=>$target.trigger('focus'),300);}};const debouncedHandleFragmentLinkClickOrHashChange=debounce(handleFragmentLinkClickOrHashChange,300,true);$(window).on('hashchange.form-fragment',debouncedHandleFragmentLinkClickOrHashChange);$(document).on('click.form-fragment','a[href*="#"]',debouncedHandleFragmentLinkClickOrHashChange);})(jQuery,Drupal,Drupal.debounce);;
(($,Drupal)=>{function DetailsSummarizedContent(node){this.$node=$(node);this.setupSummary();}$.extend(DetailsSummarizedContent,{instances:[]});$.extend(DetailsSummarizedContent.prototype,{setupSummary(){this.$detailsSummarizedContentWrapper=$(Drupal.theme('detailsSummarizedContentWrapper'));this.$node.on('summaryUpdated',this.onSummaryUpdated.bind(this)).trigger('summaryUpdated').find('> summary').append(this.$detailsSummarizedContentWrapper);},onSummaryUpdated(){const text=this.$node.drupalGetSummary();this.$detailsSummarizedContentWrapper.html(Drupal.theme('detailsSummarizedContentText',text));}});Drupal.behaviors.detailsSummary={attach(context){DetailsSummarizedContent.instances=DetailsSummarizedContent.instances.concat(once('details','details',context).map((details)=>new DetailsSummarizedContent(details)));}};Drupal.DetailsSummarizedContent=DetailsSummarizedContent;Drupal.theme.detailsSummarizedContentWrapper=()=>`<span class="summary"></span>`;Drupal.theme.detailsSummarizedContentText=(text)=>text?` (${text})`:'';})(jQuery,Drupal);;
(function($,Drupal){Drupal.behaviors.detailsAria={attach(){$(once('detailsAria','body')).on('click.detailsAria','summary',(event)=>{const $summary=$(event.currentTarget);const open=$(event.currentTarget.parentNode).attr('open')==='open'?'false':'true';$summary.attr({'aria-expanded':open});});}};})(jQuery,Drupal);;
(function($){const handleFragmentLinkClickOrHashChange=(e,$target)=>{$target.parents('details').not('[open]').find('> summary').trigger('click');};$('body').on('formFragmentLinkClickOrHashChange.details',handleFragmentLinkClickOrHashChange);window.addEventListener('invalid',(event)=>{if(event.target.matches('details input[required]'))handleFragmentLinkClickOrHashChange(event,$(event.target));},{capture:true});})(jQuery);;
((Drupal,drupalSettings,once)=>{'use strict';Drupal.solo=Drupal.solo||{};Drupal.solo.escapeSelector=(str)=>{if(!str)return '';if(typeof CSS!=='undefined'&&CSS.escape)try{return CSS.escape(str);}catch(e){console.warn('Solo: CSS.escape failed',e);}return str.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,'\\$&');};Drupal.solo.animationQueue=(()=>{const queue=new Map();const cleanupHandlers=new Map();const add=(elementKey,type,duration)=>{queue.set(elementKey,type);const timeoutId=setTimeout(()=>{queue.delete(elementKey);cleanupHandlers.delete(elementKey);},duration+100);const cleanup=()=>{clearTimeout(timeoutId);queue.delete(elementKey);cleanupHandlers.delete(elementKey);};cleanupHandlers.set(elementKey,cleanup);window.addEventListener('pagehide',cleanup,{once:true});return cleanup;};const has=(elementKey)=>queue.has(elementKey);const clear=(elementKey)=>{const cleanup=cleanupHandlers.get(elementKey);if(cleanup)cleanup();};const clearAll=()=>{cleanupHandlers.forEach((cleanup)=>cleanup());queue.clear();cleanupHandlers.clear();};return {add,has,clear,clearAll};})();Drupal.solo.setupListenerCleanup=(handlerMap)=>{if(!handlerMap||typeof MutationObserver==='undefined')return null;const observer=new MutationObserver((mutations)=>{mutations.forEach((mutation)=>{mutation.removedNodes.forEach((node)=>{if(node.nodeType===1&&node.querySelectorAll){const buttons=node.querySelectorAll('.dropdown-toggler');buttons.forEach((btn)=>{const handler=handlerMap.get(btn);if(handler){btn.removeEventListener('click',handler);handlerMap.delete(btn);}});}});});});observer.observe(document.body,{childList:true,subtree:true});return observer;};Drupal.solo.setInert=(element,value)=>{if(!element||!(element instanceof HTMLElement))return;if('inert' in HTMLElement.prototype)element.inert=value;else{element.setAttribute('aria-hidden',value?'true':'false');if(value)element.querySelectorAll('a, button, input, select, textarea, [tabindex]').forEach((el)=>{const currentTabindex=el.getAttribute('tabindex');el.setAttribute('data-original-tabindex',currentTabindex||'0');el.setAttribute('tabindex','-1');});else element.querySelectorAll('[data-original-tabindex]').forEach((el)=>{const original=el.getAttribute('data-original-tabindex');if(original==='0'||original===null)el.removeAttribute('tabindex');else el.setAttribute('tabindex',original);el.removeAttribute('data-original-tabindex');});}};Drupal.solo.animations={slideUp:drupalSettings.solo?.slideUpSpeed||350,slideDown:drupalSettings.solo?.slideDownSpeed||500,megaMenu:drupalSettings.solo?.megaMenuSpeed||800,reset:drupalSettings.solo?.slideUpSpeed||350,clickDelay:500};const animations=Drupal.solo.animations;const prefersReducedMotion=()=>window.matchMedia&&window.matchMedia('(prefers-reduced-motion: reduce)').matches;const BREAKPOINTS={XS:576,SM:768,MD:992,LG:1200,XL:1400};const SELECTORS={PAGE_WRAPPER:'.page-wrapper',SOLO_MENUS:'.solo-inner nav ul:not(.field ul)',SOLO_MENUS_ALL:'.solo-inner nav ul',FILE_UPLOAD_WRAPPER:'.solo-file-upload-wrapper',FILE_INPUT:'.solo-file-native',FILE_NAME:'.solo-file-name',SEARCH_DETAILS:'.search-form details.search-advanced',DETAILS_WRAPPER:'.details-wrapper'};const activeAnimations=new WeakMap();const cssStyles={overflow:'hidden',height:'0',paddingTop:'0',paddingBottom:'0',marginTop:'0',marginBottom:'0'};const removeStyles=(target)=>{if(!target||!(target instanceof HTMLElement)){console.warn('Solo: Invalid target element provided to removeStyles');return;}const props=['height','padding-top','padding-bottom','margin-top','margin-bottom','overflow','transition-duration','transition-property','transition-timing-function','box-sizing'];try{props.forEach((p)=>target.style.removeProperty(p));}catch(error){console.error('Solo: Error removing styles',error);}};Drupal.solo.removeStyles=removeStyles;const updateTabindex=(target,isOpen,componentName='utils')=>{if(!target||!(target instanceof HTMLElement))return;try{if(Drupal.solo.menuState)Drupal.solo.menuState.updateMenuTabindex(target,isOpen,componentName);else{const firstLevelItems=target.querySelectorAll(':scope > li > a, :scope > li > button');firstLevelItems.forEach((item)=>{item.setAttribute('tabindex',isOpen?'0':'-1');});}}catch(error){console.error('Solo: Error updating tabindex',error);}};const clearAnimationTimeout=(element)=>{const timeoutId=activeAnimations.get(element);if(timeoutId){clearTimeout(timeoutId);activeAnimations.delete(element);}};const slideUp=(target,duration=animations.slideUp,componentName='utils',announce=false)=>{if(!target||!(target instanceof HTMLElement)){console.warn('Solo: Invalid target element provided to slideUp');return false;}clearAnimationTimeout(target);if(prefersReducedMotion()){target.classList.remove('toggled');if(Drupal.solo.menuState)Drupal.solo.menuState.setHidden(target,true,componentName);else target.setAttribute('aria-hidden','true');updateTabindex(target,false,componentName);target.style.display='none';removeStyles(target);if(announce&&Drupal.announce)Drupal.announce(Drupal.t('Content collapsed'));return true;}try{target.style.transitionProperty='height, margin, padding';target.style.transitionDuration=`${duration}ms`;target.style.transitionTimingFunction='ease-in-out';target.style.boxSizing='border-box';target.style.height=`${target.offsetHeight}px`;void target.offsetHeight;target.classList.remove('toggled');if(Drupal.solo.menuState)Drupal.solo.menuState.setHidden(target,true,componentName);else target.setAttribute('aria-hidden','true');updateTabindex(target,false,componentName);Object.keys(cssStyles).forEach((style)=>{target.style[style]=cssStyles[style];});const timeoutId=setTimeout(()=>{if(target&&target.parentNode){target.style.display='none';removeStyles(target);activeAnimations.delete(target);if(announce&&Drupal.announce)Drupal.announce(Drupal.t('Content collapsed'));}},duration);activeAnimations.set(target,timeoutId);return true;}catch(error){console.error('Solo: Error in slideUp animation',error);return false;}};Drupal.solo.slideUp=slideUp;const slideDown=(target,duration=animations.slideDown,menuDisplay='block',componentName='utils',announce=false)=>{if(!target||!(target instanceof HTMLElement)){console.warn('Solo: Invalid target element provided to slideDown');return false;}clearAnimationTimeout(target);if(prefersReducedMotion()){target.style.display=menuDisplay;target.classList.add('toggled');if(Drupal.solo.menuState)Drupal.solo.menuState.setAriaAttribute(target,'aria-hidden','false',componentName);else target.setAttribute('aria-hidden','false');updateTabindex(target,true,componentName);removeStyles(target);if(announce&&Drupal.announce)Drupal.announce(Drupal.t('Content expanded'));return true;}try{target.style.removeProperty('display');let currentDisplay=window.getComputedStyle(target).display;if(currentDisplay==='none')currentDisplay=menuDisplay;target.style.display=menuDisplay;let height=target.offsetHeight;height=Math.round(height);Object.keys(cssStyles).forEach((style)=>{target.style[style]=cssStyles[style];});void target.offsetHeight;target.style.boxSizing='border-box';target.style.transitionProperty='height, margin, padding';target.style.transitionDuration=`${duration}ms`;target.style.transitionTimingFunction='ease-in-out';target.style.height=`${height}px`;target.classList.add('toggled');if(Drupal.solo.menuState)Drupal.solo.menuState.setAriaAttribute(target,'aria-hidden','false',componentName);else target.setAttribute('aria-hidden','false');updateTabindex(target,true,componentName);['padding-top','padding-bottom','margin-top','margin-bottom'].forEach((property)=>{target.style.removeProperty(property);});const timeoutId=setTimeout(()=>{if(target&&target.parentNode){['height','overflow','transition-duration','transition-property','transition-timing-function','box-sizing'].forEach((property)=>target.style.removeProperty(property));activeAnimations.delete(target);if(announce&&Drupal.announce)Drupal.announce(Drupal.t('Content expanded'));}},duration);activeAnimations.set(target,timeoutId);return true;}catch(error){console.error('Solo: Error in slideDown animation',error);return false;}};Drupal.solo.slideDown=slideDown;const slideToggle=(target,duration=animations.slideUp,componentName='utils')=>{if(!target||!(target instanceof HTMLElement)){console.warn('Solo: Invalid target element provided to slideToggle');return false;}if(activeAnimations.has(target))return false;if(!target.classList.contains('toggled'))return slideDown(target,duration,'flex',componentName);else return slideUp(target,duration,componentName);};Drupal.solo.slideToggle=slideToggle;const getCurrentWidth=()=>{if(Drupal.solo.menuState)return Drupal.solo.menuState.getCurrentWidth();return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;};const calculateDepth=(element)=>{if(!element||!(element instanceof HTMLElement))return 1;let depth=1;let parent=element.parentElement;while(parent){if(parent.tagName.toLowerCase()==='ul')depth++;parent=parent.parentElement;}return depth;};Drupal.solo.calculateDepth=calculateDepth;const addClassAccordingToDepth=(element,depth)=>{if(!element||!(element instanceof HTMLElement))return;try{element.classList.add(`ul-${depth}`);const children=element.children;for(let i=0;i<children.length;i++)if(children[i] instanceof HTMLElement)children[i].classList.add(`li-${depth}`);}catch(error){console.error('Solo: Error adding depth classes',error);}};const getMyBreakpoints=(element,mn)=>{if(!element||!(element instanceof HTMLElement))return BREAKPOINTS.MD;const classes=[`${mn}-${BREAKPOINTS.XS}`,`${mn}-${BREAKPOINTS.SM}`,`${mn}-${BREAKPOINTS.MD}`,`${mn}-${BREAKPOINTS.LG}`,`${mn}-${BREAKPOINTS.XL}`];const classList=Array.from(element.classList);const foundClass=classList.find((c)=>classes.includes(c));if(foundClass){const parts=foundClass.split('-');const value=parseInt(parts[parts.length-1],10);return isNaN(value)?BREAKPOINTS.MD:value;}return BREAKPOINTS.MD;};Drupal.solo.getMyBreakpoints=getMyBreakpoints;Drupal.solo.getBreakpointNumber=(breakpointPrefix='mn')=>{const pageClass=document.querySelector(SELECTORS.PAGE_WRAPPER);if(!pageClass){console.warn('Solo: Page wrapper element not found');return BREAKPOINTS.MD;}return Drupal.solo.getMyBreakpoints(pageClass,breakpointPrefix);};const getLayout=()=>{const pageClass=document.querySelector(SELECTORS.PAGE_WRAPPER);if(!pageClass){console.warn('Solo: Page wrapper element not found');return 'small';}const brNum=Drupal.solo.getMyBreakpoints(pageClass,'mn');const currentWidth=getCurrentWidth();return currentWidth>brNum?'large':'small';};Drupal.solo.getLayout=getLayout;Drupal.behaviors.soloMenuDepth={attach:(context,settings)=>{try{const allMenus=once('soloMenuDepth',SELECTORS.SOLO_MENUS_ALL,context);const menus=allMenus.filter((menu)=>!menu.closest('.field'));menus.forEach((element)=>{const depth=calculateDepth(element);addClassAccordingToDepth(element,depth);});}catch(error){console.error('Solo: Error in soloMenuDepth behavior',error);}},detach:(context,settings,trigger)=>{if(trigger==='unload')try{const allProcessed=once.filter('soloMenuDepth',SELECTORS.SOLO_MENUS_ALL,context);const processedMenus=allProcessed.filter((menu)=>!menu.closest('.field'));processedMenus.forEach((element)=>{Array.from(element.classList).forEach((cn)=>{if(/^ul-\d+$/.test(cn))element.classList.remove(cn);});Array.from(element.children).forEach((child)=>{if(child instanceof HTMLElement)Array.from(child.classList).forEach((cn)=>{if(/^li-\d+$/.test(cn))child.classList.remove(cn);});});});once.remove('soloMenuDepth',SELECTORS.SOLO_MENUS_ALL,context);}catch(error){console.error('Solo: Error in soloMenuDepth detach',error);}}};Drupal.behaviors.soloFileUpload={handlers:new WeakMap(),attach(context){try{const wrappers=once('solo-file-upload',SELECTORS.FILE_UPLOAD_WRAPPER,context);wrappers.forEach((wrapper)=>{const input=wrapper.querySelector(SELECTORS.FILE_INPUT);const fileName=wrapper.querySelector(SELECTORS.FILE_NAME);if(!input||!fileName){console.warn('Solo: File upload elements not found in wrapper');return;}const handler=(event)=>{try{if(input.files&&input.files.length>0){const file=input.files[0];fileName.textContent=file.name;Drupal.announce(Drupal.t('File selected: @filename',{'@filename':file.name}));}else fileName.textContent=Drupal.t('No file chosen');}catch(error){console.error('Solo: Error handling file selection',error);fileName.textContent=Drupal.t('Error selecting file');}};this.handlers.set(input,handler);input.addEventListener('change',handler);});}catch(error){console.error('Solo: Error in soloFileUpload behavior',error);}},detach(context,settings,trigger){if(trigger==='unload')try{const wrappers=once.filter('solo-file-upload',SELECTORS.FILE_UPLOAD_WRAPPER,context);wrappers.forEach((wrapper)=>{const input=wrapper.querySelector(SELECTORS.FILE_INPUT);if(input){const handler=this.handlers.get(input);if(handler){input.removeEventListener('change',handler);this.handlers.delete(input);}}});once.remove('solo-file-upload',SELECTORS.FILE_UPLOAD_WRAPPER,context);}catch(error){console.error('Solo: Error in soloFileUpload detach',error);}}};Drupal.behaviors.soloSearchAnimation={handlers:new WeakMap(),attach:(context,settings)=>{const behavior=Drupal.behaviors.soloSearchAnimation;try{const detailsElements=once('soloDetailsAnimation',SELECTORS.SEARCH_DETAILS,context);detailsElements?.forEach((detail)=>{const wrapper=detail.querySelector(SELECTORS.DETAILS_WRAPPER);if(!wrapper){console.warn('Solo: Details wrapper not found');return;}wrapper.style.transition='height 0.3s ease-in-out, opacity 0.3s ease-in-out';if(!detail.open){wrapper.style.height='0';wrapper.style.opacity='0';wrapper.style.overflow='hidden';}else{wrapper.style.overflow='hidden';wrapper.style.height='auto';wrapper.style.opacity='1';}const transitionEndHandler=(event)=>{if(event.target===wrapper&&detail.open)wrapper.style.height='auto';};const toggleHandler=()=>{try{if(detail.open){const contentHeight=wrapper.scrollHeight+'px';wrapper.style.height=contentHeight;wrapper.style.opacity='1';setTimeout(()=>{Drupal.announce(Drupal.t('Search options expanded'));},100);wrapper.addEventListener('transitionend',transitionEndHandler,{once:true});}else{wrapper.style.height=wrapper.scrollHeight+'px';requestAnimationFrame(()=>{wrapper.style.height='0';wrapper.style.opacity='0';});setTimeout(()=>{Drupal.announce(Drupal.t('Search options collapsed'));},100);}}catch(error){console.error('Solo: Error in search animation',error);}};behavior.handlers.set(detail,{toggleHandler,transitionEndHandler});detail.addEventListener('toggle',toggleHandler);});}catch(error){console.error('Solo: Error in soloSearchAnimation behavior',error);}},detach:(context,settings,trigger)=>{if(trigger==='unload'){const behavior=Drupal.behaviors.soloSearchAnimation;try{const detailsElements=once.filter('soloDetailsAnimation',SELECTORS.SEARCH_DETAILS,context);detailsElements?.forEach((detail)=>{const handlers=behavior.handlers.get(detail);if(handlers){detail.removeEventListener('toggle',handlers.toggleHandler);const wrapper=detail.querySelector(SELECTORS.DETAILS_WRAPPER);if(wrapper)wrapper.removeEventListener('transitionend',handlers.transitionEndHandler);behavior.handlers.delete(detail);}});once.remove('soloDetailsAnimation',SELECTORS.SEARCH_DETAILS,context);}catch(error){console.error('Solo: Error in soloSearchAnimation detach',error);}}}};if(typeof Drupal.solo.cleanup==='undefined')Drupal.solo.cleanup=()=>{activeAnimations.forEach((timeoutId,element)=>{clearTimeout(timeoutId);});activeAnimations.clear();};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';const BREAKPOINTS={xxs:260,xs:320,s:576,m:768,l:992,xl:1200};const getCurrentWidth=()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;const checkRegionsWidth=()=>{const regions=document.querySelectorAll('.region-inner, .copyright-inner, .footer-menu-inner');regions.forEach((region)=>{const regionWidth=region.getBoundingClientRect().width;const exactClasses=['region-xxs','region-xs','region-s','region-m','region-l','region-xl','region-xxl'];const maxClasses=Object.values(BREAKPOINTS).map((bp)=>`region-max-${bp}`);region.classList.remove(...exactClasses,...maxClasses);let exactClass='region-xxl';if(regionWidth<=BREAKPOINTS.xxs)exactClass='region-xxs';else if(regionWidth<=BREAKPOINTS.xs)exactClass='region-xs';else if(regionWidth<=BREAKPOINTS.s)exactClass='region-s';else if(regionWidth<=BREAKPOINTS.m)exactClass='region-m';else if(regionWidth<=BREAKPOINTS.l)exactClass='region-l';else{if(regionWidth<=BREAKPOINTS.xl)exactClass='region-xl';}region.classList.add(exactClass);Object.entries(BREAKPOINTS).forEach(([key,value])=>{if(regionWidth<=value)region.classList.add(`region-max-${value}`);});});};const mediaSize=()=>{const currentWidth=getCurrentWidth();const bodyTag=document.body;bodyTag.classList.remove('small-screen','medium-screen','large-screen');if(currentWidth>=BREAKPOINTS.l)bodyTag.classList.add('large-screen');else if(currentWidth>=BREAKPOINTS.s&&currentWidth<BREAKPOINTS.l)bodyTag.classList.add('medium-screen');else{if(currentWidth<BREAKPOINTS.s)bodyTag.classList.add('small-screen');}checkRegionsWidth();};const createResizeHandler=()=>{let resizeTimeout;return ()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{requestAnimationFrame(mediaSize);},200);};};const handleSkipLinkClick=(skipLinkSelector,targetSelector)=>{const skipLink=document.querySelector(skipLinkSelector);const targetElement=document.querySelector(targetSelector);if(skipLink&&targetElement)skipLink.addEventListener('click',(event)=>{event.preventDefault();if(!targetElement.hasAttribute('tabindex'))targetElement.setAttribute('tabindex','-1');targetElement.scrollIntoView({behavior:'smooth',block:'start'});setTimeout(()=>{targetElement.focus();let announcement;if(targetElement.getAttribute('aria-label'))announcement=targetElement.getAttribute('aria-label');else if(targetElement.getAttribute('id')){const cleanId=targetElement.getAttribute('id').replace(/-/g,' ');announcement=cleanId.charAt(0).toUpperCase()+cleanId.slice(1);}else announcement=Drupal.t('Target section');const liveRegion=document.createElement('div');liveRegion.setAttribute('role','status');liveRegion.setAttribute('aria-live','polite');liveRegion.className='visually-hidden';liveRegion.textContent=Drupal.t('Navigated to @section',{'@section':announcement});document.body.appendChild(liveRegion);setTimeout(()=>{if(liveRegion.parentNode)document.body.removeChild(liveRegion);},1000);},100);});};Drupal.behaviors.soloTheme={attach:function(context,settings){once('solo-file-extensions','.field--type-file span.file',context).forEach((span)=>{const link=span.querySelector('a');if(link&&span.contains(link)){const url=link.getAttribute('href');const urlParts=url.split('.');const fileExtension=urlParts[urlParts.length-1];if(fileExtension)span.classList.add(`file--${fileExtension}`);}});once('solo-footer-menu-form','#footer-menu',context).forEach((footerMenu)=>{const footerFormBg=window.getComputedStyle(footerMenu).backgroundColor;const footerFormTxt=window.getComputedStyle(footerMenu).color;const footerMenuForm=footerMenu.querySelector('form');if(footerMenuForm){footerMenuForm.style.background=footerFormBg;footerMenuForm.style.color=footerFormTxt;}});once('solo-theme-settings-details','#system-theme-settings details',context).forEach((element)=>{element.removeAttribute('open');});once('solo-clickable-images','a > img, a > picture',context).forEach((el)=>{let ancestor=el.parentElement;let shouldExclude=false;while(ancestor&&ancestor!==document.body){if(ancestor.matches('.site-logo, .field--name-user-picture, .field--type-text-long, .field--type-text-with-summary')){shouldExclude=true;break;}ancestor=ancestor.parentElement;}if(el.classList.contains('icon')||(el.parentElement&&el.parentElement.classList.contains('icon')))shouldExclude=true;if(!shouldExclude)el.parentElement.classList.add('img--is-clickable');});once('solo-broken-images','img',context).forEach((img)=>{if(img.complete&&img.naturalHeight>0)return;img.addEventListener('error',function(){if(!this.classList.contains('broken-image')&&this.complete){this.classList.add('broken-image');const placeholder=document.createElement('div');placeholder.className='img-placeholder';if(this.offsetWidth>0)placeholder.style.width=this.offsetWidth+'px';if(this.offsetHeight>0)placeholder.style.height=this.offsetHeight+'px';if(this.className)placeholder.className='img-placeholder '+this.className;placeholder.textContent=Drupal.t('Image not available');placeholder.setAttribute('role','img');placeholder.setAttribute('aria-label',Drupal.t('Image not available'));this.style.display='none';this.parentNode.insertBefore(placeholder,this);if(Drupal.announce)Drupal.announce(Drupal.t('An image failed to load'));}},{once:true});});once('solo-skip-links','body',context).forEach(()=>{handleSkipLinkClick('.skip-link[href="#header-content"]','#header-content');handleSkipLinkClick('.skip-link[href="#main-navigation-content"]','#main-navigation-content');handleSkipLinkClick('.skip-link[href="#main-content"]','#main-content');handleSkipLinkClick('.skip-link[href="#footer-content"]','#footer-content');});once('solo-media-size','body',context).forEach(()=>{mediaSize();const resizeHandler=createResizeHandler();window.addEventListener('resize',resizeHandler);if(!window.soloResizeHandlers)window.soloResizeHandlers=[];window.soloResizeHandlers.push(resizeHandler);});},detach:function(context,settings,trigger){if(trigger==='unload'&&window.soloResizeHandlers){window.soloResizeHandlers.forEach((handler)=>{window.removeEventListener('resize',handler);});window.soloResizeHandlers=[];}}};})(Drupal,drupalSettings,once);;
(function(Drupal,drupalSettings,once){'use strict';Drupal.solo=Drupal.solo||{};const CONFIG={selectors:{message:'[data-drupal-selector="messages"]',container:'[data-drupal-selector="messages-container"]',buttonWrapper:'messages__button',closeButton:'messages__close',hiddenClass:'hidden',visuallyHidden:'visually-hidden'},animation:{hideDelay:300,removeDelay:500},aria:{label:Drupal.t('Close message'),defaults:{live:'polite',role:'status'},liveByType:{error:'assertive',warning:'assertive',status:'polite',info:'polite'}}};const initializedMessages=new WeakMap();const createCloseButton=(messageId)=>{try{const closeBtnWrapper=document.createElement('div');closeBtnWrapper.classList.add(CONFIG.selectors.buttonWrapper);const closeBtn=document.createElement('button');closeBtn.setAttribute('type','button');closeBtn.classList.add(CONFIG.selectors.closeButton);closeBtn.setAttribute('aria-label',CONFIG.aria.label);closeBtn.setAttribute('aria-controls',messageId);const closeBtnText=document.createElement('span');closeBtnText.classList.add(CONFIG.selectors.visuallyHidden);closeBtnText.textContent=CONFIG.aria.label;closeBtn.appendChild(closeBtnText);closeBtnWrapper.appendChild(closeBtn);return closeBtnWrapper;}catch(error){if(window.console&&console.error)console.error('Solo Theme: Failed to create close button',error);return null;}};const handleCloseClick=(message,event)=>{try{event.preventDefault();event.stopPropagation();message.classList.add(CONFIG.selectors.hiddenClass);const messageAriaLive=message.getAttribute('aria-live')||'polite';const messageRole=message.getAttribute('role')||'status';const announcement=document.createElement('div');announcement.setAttribute('role',messageRole);announcement.setAttribute('aria-live',messageAriaLive);announcement.setAttribute('aria-atomic','true');announcement.classList.add(CONFIG.selectors.visuallyHidden);announcement.textContent=Drupal.t('Message closed');document.body.appendChild(announcement);setTimeout(()=>{if(announcement.parentNode)announcement.parentNode.removeChild(announcement);},1000);setTimeout(()=>{if(message.parentNode){cleanupMessage(message);const removeEvent=new CustomEvent('solo:messageRemoved',{detail:{message},bubbles:true});document.dispatchEvent(removeEvent);message.parentNode.removeChild(message);}},CONFIG.animation.removeDelay);}catch(error){if(window.console&&console.error)console.error('Solo Theme: Error closing message',error);}};const cleanupMessage=(message)=>{const data=initializedMessages.get(message);if(data&&data.closeHandler){const closeBtn=message.querySelector(`.${CONFIG.selectors.closeButton}`);if(closeBtn)closeBtn.removeEventListener('click',data.closeHandler);}initializedMessages.delete(message);};const getMessageType=(message)=>{if(!message||!message.classList)return 'status';const messageTypes=['error','warning','status','info'];for(const type of messageTypes)if(message.classList.contains(`messages--${type}`))return type;return 'status';};const closeMessage=(message)=>{try{if(!message||!(message instanceof HTMLElement))throw new Error('Invalid message element');if(initializedMessages.has(message))return;let messageContainer=message.querySelector(CONFIG.selectors.container);if(!messageContainer)messageContainer=message;if(!message.id)message.id=`solo-message-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(!message.hasAttribute('role')){const messageType=getMessageType(message);const role=(messageType==='error'||messageType==='warning')?'alert':'status';message.setAttribute('role',role);}if(!message.hasAttribute('aria-live')){const messageType=getMessageType(message);const ariaLive=CONFIG.aria.liveByType[messageType]||CONFIG.aria.defaults.live;message.setAttribute('aria-live',ariaLive);}if(!message.hasAttribute('aria-atomic'))message.setAttribute('aria-atomic','true');const closeBtnWrapper=createCloseButton(message.id);if(!closeBtnWrapper)throw new Error('Failed to create close button');messageContainer.appendChild(closeBtnWrapper);const closeBtn=closeBtnWrapper.querySelector(`.${CONFIG.selectors.closeButton}`);if(!closeBtn)throw new Error('Close button not found after creation');const boundHandleClose=handleCloseClick.bind(null,message);closeBtn.addEventListener('click',boundHandleClose);initializedMessages.set(message,{closeHandler:boundHandleClose,closeButton:closeBtn});const initEvent=new CustomEvent('solo:messageInitialized',{detail:{message},bubbles:true});message.dispatchEvent(initEvent);}catch(error){if(window.console&&console.error)console.error('Solo Theme: Failed to initialize message close button',error);}};Drupal.behaviors.soloMessages={attach:function(context,settings){const messages=once('solo-messages',CONFIG.selectors.message,context);messages.forEach(function(message){closeMessage(message);});if(settings.solo&&settings.solo.debug)if(messages.length>0&&window.console&&console.log)console.log(`Solo Theme: Initialized ${messages.length} message(s)`);},detach:function(context,settings,trigger){if(trigger!=='unload'){const messages=context.querySelectorAll?context.querySelectorAll(CONFIG.selectors.message):[];messages.forEach(function(message){if(initializedMessages.has(message)){cleanupMessage(message);const closeBtnWrapper=message.querySelector(`.${CONFIG.selectors.buttonWrapper}`);if(closeBtnWrapper&&closeBtnWrapper.parentNode)closeBtnWrapper.parentNode.removeChild(closeBtnWrapper);if(message.dataset.onceMessages)delete message.dataset.onceMessages;}});if(settings.solo&&settings.solo.debug&&messages.length>0)if(window.console&&console.log)console.log(`Solo Theme: Cleaned up ${messages.length} message(s)`);}}};Drupal.solo.messages={close:function(messageOrId){try{const message=typeof messageOrId==='string'?document.getElementById(messageOrId):messageOrId;if(message&&message.classList){const closeBtn=message.querySelector(`.${CONFIG.selectors.closeButton}`);if(closeBtn){closeBtn.click();return true;}}return false;}catch(error){if(window.console&&console.error)console.error('Solo Theme: Failed to close message',error);return false;}},closeAll:function(){let count=0;try{const messages=document.querySelectorAll(CONFIG.selectors.message);messages.forEach(function(message){if(Drupal.solo.messages.close(message))count++;});}catch(error){if(window.console&&console.error)console.error('Solo Theme: Failed to close all messages',error);}return count;},getConfig:function(){return Object.freeze(Object.assign({},CONFIG));}};Drupal.solo.closeMessage=closeMessage;})(Drupal,drupalSettings,once);;
(function(Drupal,once){'use strict';function init(comments){comments.querySelectorAll('[data-drupal-selector="comment"]').forEach(function(comment){if(comment.nextElementSibling?.matches('.indented'))comment.classList.add('has-children');});comments.querySelectorAll('.indented').forEach(function(commentGroup){const parentComment=commentGroup.previousElementSibling;if(!parentComment)return;const footer=parentComment.querySelector('.comment__footer');if(!footer)return;const replyCount=commentGroup.querySelectorAll('[data-drupal-selector="comment"]').length;const toggleWrapper=document.createElement('div');toggleWrapper.setAttribute('class','comment__replies-wrapper');const toggleButton=document.createElement('button');toggleButton.setAttribute('type','button');toggleButton.setAttribute('class','comment__replies-toggle solo-button');toggleButton.setAttribute('aria-expanded','true');toggleButton.setAttribute('aria-controls','replies-'+parentComment.getAttribute('data-comment-id'));const iconOpen=document.createElement('span');iconOpen.setAttribute('class','comment__replies-icon comment__replies-icon--open');iconOpen.innerHTML='<svg fill="var(--r-tx)" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M240-440v-80h480v80H240Z"/></svg>';const iconClose=document.createElement('span');iconClose.setAttribute('class','comment__replies-icon comment__replies-icon--close');iconClose.setAttribute('hidden','');iconClose.innerHTML='<svg fill="var(--r-tx)" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M440-80v-340H120v-120h320v-340h80v340h320v120H520v340h-80Z"/></svg>';const text=document.createElement('span');text.setAttribute('class','comment__replies-text');text.textContent=Drupal.t('Replies')+' ('+replyCount+')';toggleButton.appendChild(iconOpen);toggleButton.appendChild(iconClose);toggleButton.appendChild(text);toggleWrapper.appendChild(toggleButton);footer.appendChild(toggleWrapper);commentGroup.id='replies-'+parentComment.getAttribute('data-comment-id');toggleButton.addEventListener('click',function(e){e.preventDefault();const isExpanded=toggleButton.getAttribute('aria-expanded')==='true';if(isExpanded){Drupal.solo.slideUp(commentGroup,Drupal.solo.animations.slideUp,'comments');toggleButton.setAttribute('aria-expanded','false');}else{Drupal.solo.slideDown(commentGroup,Drupal.solo.animations.slideDown,'block','comments');toggleButton.setAttribute('aria-expanded','true');}});});}Drupal.behaviors.commentRepliesToggle={attach:function(context){once('comment-replies-toggle','[data-drupal-selector="comments"]',context).forEach(init);}};})(Drupal,once);;
((Drupal,drupalSettings)=>{'use strict';Drupal.solo=Drupal.solo||{};try{if(document.documentElement){document.documentElement.classList.add('solo-state-manager-loaded');document.documentElement.classList.remove('no-js');}}catch(e){console.error('Solo Menu: Could not set state manager class',e);}Drupal.solo.menuState={activeComponents:new Set(),resizeHandlers:new Map(),resizeTimeout:null,resizeObserver:null,ariaStates:new WeakMap(),ariaStateKeys:new Map(),tabindexStates:new WeakMap(),tabindexStateKeys:new Map(),activeOperations:new Map(),screenSize:{width:0,breakpoint:null,isSmallScreen:false},safeExecute(operation,context='Unknown',fallback=null){try{return operation();}catch(error){console.error(`Solo Menu Error [${context}]:`,error);if(drupalSettings?.solo?.debug)console.trace();return fallback;}},buildSafeSelector(id,additionalSelector=''){if(!id){console.warn('Solo Menu: Empty ID provided to buildSafeSelector');return null;}const escapedId=Drupal.solo.escapeSelector(id);if(!escapedId){console.error('Solo Menu: Invalid ID for selector',id);return null;}return `#${escapedId}${additionalSelector}`;},registerComponent(componentName,component){this.activeComponents.add(componentName);if(drupalSettings?.solo?.debug)console.log(`Solo Menu: Registered component ${componentName}`);},unregisterComponent(componentName){this.activeComponents.delete(componentName);this.resizeHandlers.delete(componentName);if(drupalSettings?.solo?.debug)console.log(`Solo Menu: Unregistered component ${componentName}`);},getCurrentWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;},updateScreenSize(){const pageWrapper=document.querySelector('.page-wrapper');if(!pageWrapper)return;this.screenSize.width=this.getCurrentWidth();this.screenSize.breakpoint=Drupal.solo.getMyBreakpoints(pageWrapper,'mn');this.screenSize.isSmallScreen=this.screenSize.width<=this.screenSize.breakpoint;},initResizeObserver(){if(typeof ResizeObserver==='undefined'){if(drupalSettings?.solo?.debug)console.debug('Solo Menu: ResizeObserver not available, using window resize events');return false;}const pageWrapper=document.querySelector('.page-wrapper, body');if(!pageWrapper){if(drupalSettings?.solo?.debug)console.debug('Solo Menu: No page wrapper found for ResizeObserver');return false;}this.resizeObserver=new ResizeObserver((entries)=>{clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(()=>{this.updateScreenSize();this.resizeHandlers.forEach(({handler})=>{try{handler(this.screenSize);}catch(error){console.error('Solo Menu: Error in ResizeObserver handler',error);}});},150);});this.resizeObserver.observe(pageWrapper);if(drupalSettings?.solo?.debug)console.log('Solo Menu: ResizeObserver initialized successfully');return true;},addResizeHandler(componentName,handler,delay=250){this.resizeHandlers.set(componentName,{handler,delay});if(!this.resizeObserver){const observerInitialized=this.initResizeObserver();if(observerInitialized)return;}if(this.globalResizeHandler)window.removeEventListener('resize',this.globalResizeHandler);this.globalResizeHandler=()=>{clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(()=>{this.updateScreenSize();this.resizeHandlers.forEach(({handler})=>{try{handler(this.screenSize);}catch(error){console.error('Solo Menu: Error in resize handler',error);}});},Math.max(...Array.from(this.resizeHandlers.values()).map((h)=>h.delay)));};window.addEventListener('resize',this.globalResizeHandler);},setAriaAttribute(element,attribute,value,componentName){if(!element||!(element instanceof HTMLElement)){if(drupalSettings?.solo?.debug)console.warn('Solo Menu: Invalid element in setAriaAttribute',{attribute,componentName});return;}let elementStates=this.ariaStates.get(element);if(!elementStates){elementStates={};this.ariaStates.set(element,elementStates);}const currentOwner=elementStates[attribute];if(currentOwner&&currentOwner!==componentName&&drupalSettings?.solo?.debug)console.debug(`Solo Menu: ARIA conflict - ${attribute} on element, current: ${currentOwner}, new: ${componentName}`);element.setAttribute(attribute,value);elementStates[attribute]=componentName;const key=`${attribute}_${element.id||'elem_'+Date.now()+'_'+Math.random()}`;this.ariaStateKeys.set(key,{element,attribute,component:componentName,timestamp:Date.now()});this.notifyAriaChange(element,attribute,value,componentName);},setExpanded(element,isExpanded,componentName='unknown'){this.setAriaAttribute(element,'aria-expanded',isExpanded?'true':'false',componentName);},setHidden(element,isHidden,componentName='unknown'){this.setAriaAttribute(element,'aria-hidden',isHidden?'true':'false',componentName);},setTabindex(element,value,componentName){if(!element||!(element instanceof HTMLElement)){if(drupalSettings?.solo?.debug)console.warn('Solo Menu: Invalid element in setTabindex',{componentName});return;}let elementState=this.tabindexStates.get(element);const priorities={'keyboard':3,'mobile':2,'sidebar':2,'default':1};const newPriority=priorities[componentName]||1;if(elementState){const currentPriority=priorities[elementState.component]||1;if(newPriority<currentPriority){if(drupalSettings?.solo?.debug)console.debug(`Solo Menu: Tabindex blocked - current priority ${currentPriority} (${elementState.component}) > new ${newPriority} (${componentName})`);return;}}element.setAttribute('tabindex',value);this.tabindexStates.set(element,{component:componentName,value,timestamp:Date.now()});const key=element.id||`elem_${Date.now()}_${Math.random()}`;this.tabindexStateKeys.set(key,{element,component:componentName,timestamp:Date.now()});},updateMenuTabindex(container,isOpen,componentName='unknown'){if(!container)return;const items=container.querySelectorAll(':scope > li > a, :scope > li > button');items.forEach((item)=>{this.setTabindex(item,isOpen?'0':'-1',componentName);});},hideSubmenu(subMenu,componentName='unknown'){if(!subMenu)return;Drupal.solo.slideUp(subMenu,Drupal.solo.animations.slideUp,componentName);this.setHidden(subMenu,true,componentName);const toggler=subMenu.previousElementSibling;if(toggler?.classList.contains('dropdown-toggler'))this.setExpanded(toggler,false,componentName);},notifyAriaChange(element,attribute,value,changedBy){element.dispatchEvent(new CustomEvent('solo-aria-change',{detail:{attribute,value,changedBy},bubbles:true}));},getMenuState(menuElement){const isOpen=menuElement.classList.contains('toggled');const ariaExpanded=menuElement.getAttribute('aria-expanded')==='true';const ariaHidden=menuElement.getAttribute('aria-hidden')==='false';if(isOpen!==ariaExpanded||isOpen===ariaHidden){if(drupalSettings?.solo?.debug)console.debug('Solo Menu: Resolving state conflict for',menuElement);this.setAriaAttribute(menuElement,'aria-expanded',isOpen?'true':'false','state-resolver');this.setAriaAttribute(menuElement,'aria-hidden',isOpen?'false':'true','state-resolver');}return {isOpen,ariaExpanded:isOpen,ariaHidden:!isOpen};},shouldProceedWithOperation(menuElement,componentName,operation){const menuId=menuElement.id||menuElement.className;const activeOp=this.activeOperations.get(menuId);if(!activeOp)return true;const priorities={'keyboard':4,'mobile':3,'sidebar':2,'scripts':1,'main':1,'repositions':1};const currentPriority=priorities[activeOp.component]||1;const newPriority=priorities[componentName]||1;return newPriority>currentPriority;},coordinateMenuOperation(operation,menuElement,componentName){if(!this.shouldProceedWithOperation(menuElement,componentName,operation)){if(drupalSettings?.solo?.debug)console.debug(`Solo Menu: Operation ${operation} blocked for ${componentName}`);return;}const menuId=menuElement.id||menuElement.className;this.activeOperations.set(menuId,{component:componentName,operation,timestamp:Date.now()});const operations={'open':()=>{menuElement.classList.add('toggled');this.setAriaAttribute(menuElement,'aria-expanded','true',componentName);this.setAriaAttribute(menuElement,'aria-hidden','false',componentName);},'close':()=>{menuElement.classList.remove('toggled');this.setAriaAttribute(menuElement,'aria-expanded','false',componentName);this.setAriaAttribute(menuElement,'aria-hidden','true',componentName);},'toggle':()=>{const {isOpen}=this.getMenuState(menuElement);this.coordinateMenuOperation(isOpen?'close':'open',menuElement,componentName);}};if(operations[operation])operations[operation]();setTimeout(()=>{const currentOp=this.activeOperations.get(menuId);if(currentOp&&currentOp.timestamp===this.activeOperations.get(menuId)?.timestamp)this.activeOperations.delete(menuId);},50);},validateState(){const issues=[];this.ariaStateKeys.forEach((data,key)=>{const {element,attribute,component}=data;if(!element||!document.contains(element)){issues.push(`Orphaned ARIA state: ${attribute} (component: ${component})`);this.ariaStateKeys.delete(key);}});this.tabindexStateKeys.forEach((data,key)=>{const {element,component}=data;if(!element||!document.contains(element)){issues.push(`Orphaned tabindex state (component: ${component})`);this.tabindexStateKeys.delete(key);}});this.activeOperations.forEach((operation,menuId)=>{const age=Date.now()-operation.timestamp;if(age>5000){issues.push(`Stale operation: ${operation.operation} on ${menuId} (age: ${Math.round(age/1000)}s, component: ${operation.component})`);this.activeOperations.delete(menuId);}});if(issues.length>0&&drupalSettings?.solo?.debug){console.warn(`Solo Menu State Validation: ${issues.length} issues found`);console.log(issues);}return issues.length===0;},cleanup(){try{if(this._validationInterval){clearInterval(this._validationInterval);this._validationInterval=null;}if(this.resizeObserver){this.resizeObserver.disconnect();this.resizeObserver=null;}if(this.globalResizeHandler){window.removeEventListener('resize',this.globalResizeHandler);this.globalResizeHandler=null;}if(this.resizeTimeout){clearTimeout(this.resizeTimeout);this.resizeTimeout=null;}this.resizeHandlers.clear();this.ariaStateKeys.clear();this.tabindexStateKeys.clear();this.activeComponents.clear();this.activeOperations.clear();this.ariaStates=new WeakMap();this.tabindexStates=new WeakMap();}catch(error){}}};Drupal.solo.menuState.updateScreenSize();Drupal.solo.getCurrentWidth=()=>Drupal.solo.menuState.getCurrentWidth();const originalHideSubMenus=Drupal.solo.hideSubMenus;Drupal.solo.hideSubMenus=(submenu,componentName='unknown')=>{if(originalHideSubMenus)originalHideSubMenus(submenu);Drupal.solo.menuState.coordinateMenuOperation('close',submenu,componentName);};if(window.addEventListener){window.addEventListener('beforeunload',()=>{Drupal.solo.menuState.cleanup();});window.addEventListener('pagehide',()=>{Drupal.solo.menuState.cleanup();});}if(drupalSettings?.solo?.debug){Drupal.solo.menuState._validationInterval=setInterval(()=>{const isValid=Drupal.solo.menuState.validateState();if(!isValid&&drupalSettings?.solo?.debug)console.log('Solo Menu: State validation completed with issues (see warnings above)');},30000);window.soloValidateState=()=>{console.log('Running Solo Menu state validation...');const isValid=Drupal.solo.menuState.validateState();if(isValid)console.log(' All states are valid');else console.log(' Issues found (see warnings above)');return isValid;};console.log('Solo Menu: State validation enabled. Run soloValidateState() in console to check manually.');}})(Drupal,drupalSettings);;
((Drupal,drupalSettings,once)=>{'use strict';const COMPONENT_NAME='main';const animations=Drupal.solo.animations;if(Drupal.solo.menuState)Drupal.solo.menuState.registerComponent(COMPONENT_NAME,{name:'Solo Main Menu',version:'1.0'});const CONFIG={selectors:{menuBar:'.solo-inner .solo-menu .navigation__menubar',subMenus:'.solo-inner .solo-menu .navigation__menubar ul',svgIcons:'.solo-inner .solo-menu .navigation__menubar .toggler-icon>svg',megaMenuClick:{big:'.solo-inner .solo-menu.navigation-responsive-click .navigation__megamenu>li>.dropdown-toggler',small:'.solo-inner .solo-menu.navigation-responsive-click .navigation__megamenu li .dropdown-toggler'},megaMenuHover:'.solo-inner .solo-menu.navigation-responsive-hover .navigation__megamenu li .dropdown-toggler',responsiveHover:'.solo-inner .solo-menu.navigation-responsive-hover .navigation__menubar:not(.navigation__megamenu) .dropdown-toggler',responsiveClick:'.solo-inner .solo-menu.navigation-responsive-click .navigation__menubar:not(.navigation__megamenu) .dropdown-toggler',default:'.solo-inner .solo-menu .navigation__default .dropdown-toggler',sidebarHover:'.solo-inner .solo-menu.navigation-sidebar-hover li .dropdown-toggler',sidebarClick:'.solo-inner .solo-menu.navigation-sidebar-click li .dropdown-toggler'}};const ARROW_ROTATIONS={'default':'rotate(180deg)','ltr-right':'rotate(-90deg)','ltr-left':'rotate(90deg)','rtl-right':'rotate(90deg)','rtl-left':'rotate(-90deg)'};const state={resizeHandler:null,isClicked:false,currentWidth:0,currentLayout:null,previousLayout:null,brNum:0,animationQueue:new Map()};const getCurrentWidth=()=>Drupal.solo.menuState.getCurrentWidth();const utils={querySelectorElements:(selector,context)=>{if(!context||!selector){console.warn('Solo Menu: Invalid selector or context',{selector,context});return [];}try{return Array.from(context.querySelectorAll(selector)||[]);}catch(error){console.error('Solo Menu: Query selector failed',{selector,error});return [];}},hasParentWithClass:(element,className)=>!!element.closest(`.${className}`),getNavTagId:(dropdownTogglerButton)=>dropdownTogglerButton.closest('nav')?.id,getRotated:(dropdownTogglerButton)=>dropdownTogglerButton.querySelector('.toggler-icon svg'),setSubMenuAttributes:(element,attributes)=>{for(const key in attributes)if(Drupal.solo.menuState&&key.startsWith('aria-'))Drupal.solo.menuState.setAriaAttribute(element,key,attributes[key],COMPONENT_NAME);else element.setAttribute(key,attributes[key]);},delay:(duration)=>new Promise((resolve)=>setTimeout(resolve,duration))};const clickedHandler=async(callback)=>{if(!state.isClicked){state.isClicked=true;await callback();await utils.delay(animations.clickDelay);state.isClicked=false;}};const getArrowDirection=(verticalNav)=>{const shouldRotate=state.currentWidth>=state.brNum&&!verticalNav;if(!shouldRotate)return ARROW_ROTATIONS.default;const isRtl=document.documentElement.dir==='rtl';const isExpandLeft=document.querySelector('#primary-menu .expand-left')!==null;const key=`${isRtl?'rtl':'ltr'}-${isExpandLeft?'left':'right'}`;return ARROW_ROTATIONS[key];};const menuVisibility={hideSubMenus:(subMenu)=>{Drupal.solo.menuState.hideSubmenu(subMenu,COMPONENT_NAME);},closeMenuHelper:(rotated,dropdownTogglerButton,subMenu)=>{if(!subMenu)return;const elementKey=subMenu.id||subMenu.className;if(Drupal.solo.animationQueue.has(elementKey))return;Drupal.solo.animationQueue.add(elementKey,'closing',animations.slideUp);rotated.style.removeProperty('transform');Drupal.solo.menuState.setExpanded(dropdownTogglerButton,false,COMPONENT_NAME);Drupal.solo.slideUp(subMenu,animations.slideUp,COMPONENT_NAME,true);},openMenuHelper:(dropdownTogglerButton,subMenu)=>{if(!subMenu)return;const elementKey=subMenu.id||subMenu.className;if(Drupal.solo.animationQueue.has(elementKey))return;state.currentWidth=getCurrentWidth();let duration;if(subMenu.classList.contains('sub-mega')&&state.currentWidth>=state.brNum){duration=animations.megaMenu;Drupal.solo.animationQueue.add(elementKey,'opening',duration);Drupal.solo.slideDown(subMenu,duration,'grid',COMPONENT_NAME,true);}else{duration=animations.slideDown;Drupal.solo.animationQueue.add(elementKey,'opening',duration);Drupal.solo.slideDown(subMenu,duration,'block',COMPONENT_NAME,true);}Drupal.solo.menuState.setExpanded(dropdownTogglerButton,true,COMPONENT_NAME);}};const iconManagement={revertIcons:(navId)=>{if(!navId)return;const escapedId=Drupal.solo.escapeSelector(navId);if(!escapedId){console.error('Solo Menu: Invalid nav ID in revertIcons',navId);return;}const svgIcons=document.querySelectorAll(`.solo-inner #${escapedId} .toggler-icon svg`);svgIcons.forEach((svgIcon)=>svgIcon.style.removeProperty('transform'));},resetSubMenus:(siteSubMenus,svgIcons)=>{svgIcons.forEach((el)=>el.style.removeProperty('transform'));siteSubMenus.forEach((el)=>Drupal.solo.slideUp(el,animations.slideUp,COMPONENT_NAME,false));setTimeout(()=>{siteSubMenus.forEach((el)=>el.style.removeProperty('transform'));},animations.reset);},resetSpecificSubMenus:(specificSubMenus,specificSvgIcons)=>{specificSvgIcons.forEach((el)=>el.style.removeProperty('transform'));specificSubMenus.forEach((el)=>Drupal.solo.slideUp(el,animations.slideUp,COMPONENT_NAME,false));setTimeout(()=>{specificSubMenus.forEach((el)=>el.style.removeProperty('transform'));},animations.reset);}};const menuOperations={openMenubar:(dropdownTogglerButton,subMenu)=>{Drupal.solo.setInert(subMenu,false);const navTagId=utils.getNavTagId(dropdownTogglerButton);const subMenuClasses=Drupal.solo.getSubMenuClasses(navTagId);const rotated=utils.getRotated(dropdownTogglerButton);subMenuClasses?.forEach((subMenuClass)=>{if(subMenuClass!==subMenu){menuVisibility.hideSubMenus(subMenuClass);iconManagement.revertIcons(navTagId);}});rotated.style.transform=ARROW_ROTATIONS.default;menuVisibility.openMenuHelper(dropdownTogglerButton,subMenu);},closeMenubar:(dropdownTogglerButton,subMenu)=>{if(!subMenu)return;if(subMenu.contains(document.activeElement)){document.activeElement.blur();if(dropdownTogglerButton&&document.contains(dropdownTogglerButton))dropdownTogglerButton.focus();}const navTagId=utils.getNavTagId(dropdownTogglerButton);const subMenuClasses=Drupal.solo.getSubMenuClasses(navTagId);const rotated=utils.getRotated(dropdownTogglerButton);subMenuClasses?.forEach((subMenuClass)=>{if(subMenuClass.contains(document.activeElement))document.activeElement.blur();menuVisibility.hideSubMenus(subMenuClass);iconManagement.revertIcons(navTagId);Drupal.solo.setInert(subMenuClass,true);});menuVisibility.closeMenuHelper(rotated,dropdownTogglerButton,subMenu);Drupal.solo.setInert(subMenu,true);},openSubMenu:(dropdownTogglerButton,subMenu)=>{Drupal.solo.setInert(subMenu,false);const togglerSibling=dropdownTogglerButton.closest('.solo-inner .solo-menu ul');const nestedSubMenus=[...togglerSibling.querySelectorAll(':scope > li > ul.sub__menu')];const nestedTogglers=[...togglerSibling.querySelectorAll(':scope > li > button.dropdown-toggler svg')];const rotated=utils.getRotated(dropdownTogglerButton);const verticalNav=subMenu.closest('.navigation-sidebar');nestedSubMenus.forEach((nestedSubMenu)=>{if(nestedSubMenu!==subMenu)menuVisibility.hideSubMenus(nestedSubMenu);});nestedTogglers.forEach((nestedToggler)=>{if(nestedToggler!==rotated)nestedToggler.style.removeProperty('transform');});rotated.style.transform=getArrowDirection(verticalNav);menuVisibility.openMenuHelper(dropdownTogglerButton,subMenu);},closeSubMenu:(dropdownTogglerButton,subMenu)=>{if(!subMenu)return;if(subMenu.contains(document.activeElement)){document.activeElement.blur();if(dropdownTogglerButton&&document.contains(dropdownTogglerButton))dropdownTogglerButton.focus();}const rotated=utils.getRotated(dropdownTogglerButton);menuVisibility.closeMenuHelper(rotated,dropdownTogglerButton,subMenu);const parentLi=dropdownTogglerButton.closest('li.has-sub__menu');parentLi?.classList.remove('submenu-flipped-left','submenu-flipped-right');if(subMenu?.dataset.flipped)delete subMenu.dataset.flipped;const nestedSubMenus=subMenu.querySelectorAll('ul.sub__menu');const nestedTogglers=subMenu.querySelectorAll('button.dropdown-toggler');nestedSubMenus.forEach((nested)=>{if(nested.contains(document.activeElement))document.activeElement.blur();Drupal.solo.slideUp(nested,animations.slideUp,COMPONENT_NAME);nested.classList.remove('toggled');Drupal.solo.setInert(nested,true);});nestedTogglers.forEach((toggler)=>{const icon=toggler.querySelector('.toggler-icon svg');icon?.style.removeProperty('transform');Drupal.solo.menuState.setExpanded(toggler,false,COMPONENT_NAME);});Drupal.solo.setInert(subMenu,true);}};const eventHandlers={clickHandlers:new WeakMap(),dropdownTogglerButtonIsClicked:(dropdownTogglerButton,subMenu)=>{clickedHandler(()=>{const isMenubar=dropdownTogglerButton.parentElement.classList.contains('nav__menubar-item');let isToggled=false;if(Drupal.solo.menuState){const state=Drupal.solo.menuState.getMenuState(subMenu);isToggled=state.isOpen;}else isToggled=subMenu.classList.contains('toggled');if(isMenubar)isToggled?menuOperations.closeMenubar(dropdownTogglerButton,subMenu):menuOperations.openMenubar(dropdownTogglerButton,subMenu);else isToggled?menuOperations.closeSubMenu(dropdownTogglerButton,subMenu):menuOperations.openSubMenu(dropdownTogglerButton,subMenu);});},addRemoveListener:function(event){const button=event.currentTarget;const subMenu=button.nextElementSibling;eventHandlers.dropdownTogglerButtonIsClicked(button,subMenu);},addEventListenerToButtons:(buttons)=>{buttons.forEach((button)=>{if(eventHandlers.clickHandlers.has(button))return;const handler=function(event){const button=event.currentTarget;const subMenu=button.nextElementSibling;eventHandlers.dropdownTogglerButtonIsClicked(button,subMenu);};eventHandlers.clickHandlers.set(button,handler);button.addEventListener('click',handler);});},removeEventListenerToButtons:(buttons)=>{buttons.forEach((button)=>{const handler=eventHandlers.clickHandlers.get(button);if(handler){button.removeEventListener('click',handler);eventHandlers.clickHandlers.delete(button);if(drupalSettings?.solo?.debug)console.log('Removing listeners from',buttons.length,'buttons');}});}};const addHoverFunctionality=(searchContext=document)=>{if(getCurrentWidth()<state.brNum)return;const hoverMenus=searchContext.querySelector('.navigation-responsive-hover');if(!hoverMenus)return;const menuItems=searchContext.querySelectorAll('.navigation-responsive-hover li.has-sub__menu');menuItems.forEach((item)=>{if(item.hasAttribute('data-hover-added'))return;const toggler=item.querySelector(':scope > button.dropdown-toggler');const subMenu=item.querySelector(':scope > ul');if(toggler&&subMenu){item.addEventListener('mouseenter',()=>{Drupal.solo.menuState.setExpanded(toggler,true,COMPONENT_NAME);Drupal.solo.menuState.setHidden(subMenu,false,COMPONENT_NAME);});item.addEventListener('mouseleave',()=>{Drupal.solo.menuState.setExpanded(toggler,false,COMPONENT_NAME);Drupal.solo.menuState.setHidden(subMenu,true,COMPONENT_NAME);});}item.setAttribute('data-hover-added','true');});};const closeSubMenusOnClick=()=>{const navMenus=['.solo-inner .solo-menu.navigation-responsive-click .navigation__menubar','#primary-sidebar-menu .navigation__menubar'];document.addEventListener('click',(event)=>{clickedHandler(()=>{const isInsideMenu=navMenus.some((selector)=>event.target.closest(selector));if(!isInsideMenu){const specificNavMenus=document.querySelectorAll(navMenus.join(', '));const specificSubMenus=[];const specificSvgIcons=[];specificNavMenus.forEach((menu)=>{specificSubMenus.push(...menu.querySelectorAll('ul.navigation__menubar ul'));specificSvgIcons.push(...menu.querySelectorAll('.toggler-icon svg'));});iconManagement.resetSpecificSubMenus(specificSubMenus,specificSvgIcons);}});});};const menusHelper=(currentWidth,searchContext=document)=>{const buttons={mmClickSmall:document.querySelectorAll(CONFIG.selectors.megaMenuClick.small),mmClickBig:document.querySelectorAll(CONFIG.selectors.megaMenuClick.big),mmHoverSmall:document.querySelectorAll(CONFIG.selectors.megaMenuHover),navigationSidebarHover:document.querySelectorAll(CONFIG.selectors.sidebarHover),navigationResponsiveHover:document.querySelectorAll(CONFIG.selectors.responsiveHover)};const largeScreenActions=[{remove:buttons.mmClickSmall,add:buttons.mmClickBig},{remove:buttons.mmHoverSmall,add:null},{remove:buttons.navigationSidebarHover,add:null},{remove:buttons.navigationResponsiveHover,add:null}];const smallScreenActions=[{remove:buttons.mmClickBig,add:buttons.mmClickSmall},{remove:null,add:buttons.mmHoverSmall},{remove:null,add:buttons.navigationSidebarHover},{remove:null,add:buttons.navigationResponsiveHover}];const siteMenuBars=document.querySelectorAll(CONFIG.selectors.menuBar);siteMenuBars.forEach((siteMenuBar)=>siteMenuBar.removeAttribute('style'));const actions=currentWidth>=state.brNum?largeScreenActions:smallScreenActions;actions.forEach(({remove,add})=>{if(remove)eventHandlers.removeEventListenerToButtons(remove);if(add)eventHandlers.addEventListenerToButtons(add);});};const markActiveMenuItem=()=>{const currentPath=window.location.pathname;const links=document.querySelectorAll('.views-page .navigation__menubar li a');links?.forEach((link)=>{if(link.getAttribute('href')===currentPath){let currentElement=link;while(currentElement&&!currentElement.matches('ul.navigation__menubar')){if(currentElement.tagName==='LI')currentElement.classList.add('is-active');currentElement=currentElement.parentElement;}}});};const exposePublicAPI=()=>{Drupal.solo.clickedHandler=clickedHandler;Drupal.solo.hideSubMenus=menuVisibility.hideSubMenus;Drupal.solo.revertIcons=iconManagement.revertIcons;Drupal.solo.getNavigationMenubarClass=(menuBar)=>{if(!menuBar)return null;const escapedId=Drupal.solo.escapeSelector(menuBar);if(!escapedId){console.error('Solo Menu: Invalid menuBar ID',menuBar);return null;}return document.querySelector(`.solo-inner #${escapedId} .navigation__menubar`);};Drupal.solo.getSubMenuClasses=(subMenus)=>{if(!subMenus)return [];const escapedId=Drupal.solo.escapeSelector(subMenus);if(!escapedId){console.error('Solo Menu: Invalid subMenus ID',subMenus);return [];}return document.querySelectorAll(`.solo-inner #${escapedId} .navigation__menubar ul.sub__menu`);};Drupal.solo.menuOperations=menuOperations;Drupal.solo.menuVisibility=menuVisibility;Drupal.solo.eventHandlers=eventHandlers;};Drupal.behaviors.menuAction={attach:function(context,settings){if(context._soloMenuInitialized){if(drupalSettings?.solo?.debug)console.debug('Solo Menu: Already initialized, skipping');return;}if(!Drupal.solo||!Drupal.solo.animations){console.error('Solo Menu: Required dependencies not loaded');return;}if(!Drupal.solo.getBreakpointNumber||!Drupal.solo.getLayout){console.error('Solo Menu: Required utility functions not available');return;}context._soloMenuInitialized=true;state.brNum=Drupal.solo.getBreakpointNumber('mn');state.previousLayout=Drupal.solo.getLayout();state.currentWidth=getCurrentWidth();state.currentLayout=state.previousLayout;const elements={siteMenuBars:utils.querySelectorElements(CONFIG.selectors.menuBar,context),siteSubMenus:utils.querySelectorElements(CONFIG.selectors.subMenus,context),svgIcons:utils.querySelectorElements(CONFIG.selectors.svgIcons,context),navigationDefault:utils.querySelectorElements(CONFIG.selectors.default,context),navigationResponsiveClick:utils.querySelectorElements(CONFIG.selectors.responsiveClick,context),navigationSidebarClick:utils.querySelectorElements(CONFIG.selectors.sidebarClick,context)};elements.siteMenuBars.forEach((siteMenuBar)=>{siteMenuBar.addEventListener('click',()=>{const sideMenu='navigation-sidebar';const shouldRemoveFocus=utils.hasParentWithClass(siteMenuBar,sideMenu)||state.currentWidth<=state.brNum;siteMenuBar.classList[shouldRemoveFocus?'remove':'add']('focus-in');});});markActiveMenuItem();addHoverFunctionality();eventHandlers.addEventListenerToButtons(elements.navigationResponsiveClick);eventHandlers.addEventListenerToButtons(elements.navigationSidebarClick);elements.navigationDefault.forEach((button)=>{button.style.pointerEvents='none';button.setAttribute('tabindex','-1');button.setAttribute('aria-hidden','true');});menusHelper(state.currentWidth,context);if(Drupal.solo.menuState)Drupal.solo.menuState.addResizeHandler(COMPONENT_NAME,(screenInfo)=>{state.currentLayout=Drupal.solo.getLayout();state.currentWidth=screenInfo.width;if(state.previousLayout!==state.currentLayout){menusHelper(state.currentWidth,context);iconManagement.resetSubMenus(elements.siteSubMenus,elements.svgIcons);state.previousLayout=state.currentLayout;document.querySelectorAll('.navigation__menubar, .sub__menu').forEach((element)=>{Drupal.solo.setInert(element,false);});}addHoverFunctionality();},250);else{state.resizeHandler=()=>{state.currentLayout=Drupal.solo.getLayout();state.currentWidth=getCurrentWidth();if(state.previousLayout!==state.currentLayout){menusHelper(state.currentWidth,document);iconManagement.resetSubMenus(elements.siteSubMenus,elements.svgIcons);state.previousLayout=state.currentLayout;document.querySelectorAll('.navigation__menubar, .sub__menu').forEach((element)=>{Drupal.solo.setInert(element,false);});}addHoverFunctionality();};window.addEventListener('resize',state.resizeHandler);}closeSubMenusOnClick();exposePublicAPI();},detach:function(context,settings,trigger){if(trigger==='unload'){delete context._soloMenuInitialized;const allButtons=context.querySelectorAll('.dropdown-toggler');eventHandlers.removeEventListenerToButtons(allButtons);let orphanedCount=0;allButtons.forEach((button)=>{if(!eventHandlers.clickHandlers.has(button)){const testHandler=()=>{};button.addEventListener('click',testHandler);button.removeEventListener('click',testHandler);if(button.parentNode&&button.onclick===null){const clone=button.cloneNode(true);button.parentNode.replaceChild(clone,button);orphanedCount++;}}});if(orphanedCount>0&&drupalSettings?.solo?.debug)console.debug(`Solo Menu: Cleaned ${orphanedCount} orphaned listeners`);if(state.resizeHandler){window.removeEventListener('resize',state.resizeHandler);state.resizeHandler=null;}if(Drupal.solo.menuState)Drupal.solo.menuState.unregisterComponent(COMPONENT_NAME);if(state.animationQueue)state.animationQueue.clear();eventHandlers.clickHandlers=new WeakMap();const siteMenuBars=context.querySelectorAll('.navigation__menubar');siteMenuBars.forEach((menuBar)=>{menuBar.classList.remove('focus-in');const hoverItems=menuBar.querySelectorAll('[data-hover-added]');hoverItems.forEach((item)=>item.removeAttribute('data-hover-added'));});}}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';const COMPONENT_NAME='mobile';let currentLayout=Drupal.solo.getLayout();let previousLayout=currentLayout;const animations=Drupal.solo.animations;if(Drupal.solo.menuState)Drupal.solo.menuState.registerComponent(COMPONENT_NAME,{name:'Solo Mobile Menu',version:'1.0'});const brNum=Drupal.solo.getBreakpointNumber('mn');const getCurrentWidth=()=>Drupal.solo.menuState.getCurrentWidth();const updateFirstLevelTabindex=(menuElement,tabindexValue)=>{if(!menuElement)return;const isOpen=tabindexValue==='0';Drupal.solo.menuState.updateMenuTabindex(menuElement.querySelector('ul.navigation__responsive'),isOpen,COMPONENT_NAME);};const updateAriaHidden=(menuElement,hiddenValue)=>{if(!menuElement)return;const currentWidth=getCurrentWidth();if(currentWidth<=brNum)Drupal.solo.menuState.setHidden(menuElement,hiddenValue==='true',COMPONENT_NAME);else Drupal.solo.menuState.setHidden(menuElement,false,COMPONENT_NAME);};const openMobileMenu=(navTagId)=>{const currentWidth=getCurrentWidth();if(currentWidth>brNum)return;const navigationMenubarClass=Drupal.solo.getNavigationMenubarClass(navTagId);const subMenuClasses=Drupal.solo.getSubMenuClasses(navTagId);const menuElement=document.getElementById(navTagId);subMenuClasses?.forEach((subMenu)=>{Drupal.solo.hideSubMenus(subMenu,COMPONENT_NAME);Drupal.solo.revertIcons(navTagId);});if(Drupal.solo.menuState&&navigationMenubarClass)Drupal.solo.menuState.coordinateMenuOperation('open',navigationMenubarClass,COMPONENT_NAME);Drupal.solo.slideDown(navigationMenubarClass,animations.slideDown,'block',COMPONENT_NAME);requestAnimationFrame(()=>{if(navigationMenubarClass){Drupal.solo.menuState.setHidden(navigationMenubarClass,false,COMPONENT_NAME);Drupal.solo.setInert(navigationMenubarClass,false);}if(menuElement)updateFirstLevelTabindex(menuElement,'0');});};const closeMobileMenu=(navTagId)=>{const currentWidth=getCurrentWidth();if(currentWidth>brNum)return;const navigationMenubarClass=Drupal.solo.getNavigationMenubarClass(navTagId);const subMenuClasses=Drupal.solo.getSubMenuClasses(navTagId);const menuElement=document.getElementById(navTagId);if(navigationMenubarClass&&navigationMenubarClass.contains(document.activeElement)){document.activeElement.blur();const hamburgerButton=document.querySelector('.mobile-nav button');if(hamburgerButton&&document.contains(hamburgerButton))hamburgerButton.focus();}subMenuClasses?.forEach((subMenu)=>{if(subMenu.contains(document.activeElement))document.activeElement.blur();Drupal.solo.hideSubMenus(subMenu,COMPONENT_NAME);Drupal.solo.revertIcons(navTagId);Drupal.solo.setInert(subMenu,true);});if(Drupal.solo.menuState&&navigationMenubarClass)Drupal.solo.menuState.coordinateMenuOperation('close',navigationMenubarClass,COMPONENT_NAME);Drupal.solo.slideUp(navigationMenubarClass,animations.slideDown,COMPONENT_NAME);if(navigationMenubarClass){Drupal.solo.menuState.setHidden(navigationMenubarClass,true,COMPONENT_NAME);Drupal.solo.setInert(navigationMenubarClass,true);}if(menuElement)updateFirstLevelTabindex(menuElement,'-1');};const getMobileNavType=(hamburgerIcon)=>{if(!hamburgerIcon||!(hamburgerIcon instanceof HTMLElement)){console.warn('Solo Menu Mobile: Invalid hamburger icon element');return [null,null,null];}const hamburgerIconChild=hamburgerIcon;const navElement=hamburgerIcon.closest('nav');if(!navElement){console.warn('Solo Menu Mobile: Navigation element not found for hamburger icon');return [hamburgerIconChild,null,null];}const navTagId=navElement.id;if(!navTagId){console.warn('Solo Menu Mobile: Navigation element missing ID attribute');return [hamburgerIconChild,null,null];}const menuElement=document.getElementById(navTagId);if(!menuElement)console.warn('Solo Menu Mobile: Menu element not found for ID:',navTagId);return [hamburgerIconChild,navTagId,menuElement];};const hamburgerIconIsClicked=(hamburgerIcon)=>{if(!hamburgerIcon){console.warn('Solo Menu Mobile: Invalid hamburger icon');return;}const currentWidth=getCurrentWidth();if(currentWidth>brNum){if(drupalSettings?.solo?.debug)console.debug('Solo Menu Mobile: Hamburger click ignored on desktop');return;}const [hamburgerIconChild,navTagId]=getMobileNavType(hamburgerIcon);if(!navTagId){console.warn('Solo Menu Mobile: Could not determine navigation ID');return;}const escapedNavId=Drupal.solo.escapeSelector(navTagId);if(!escapedNavId){console.error('Solo Menu Mobile: Invalid navigation ID',navTagId);return;}const navigationMenubar=document.querySelector(`#${escapedNavId} .navigation__menubar`);if(!navigationMenubar){console.warn('Solo Menu Mobile: Navigation menubar not found for',navTagId);return;}let isOpen=false;if(Drupal.solo.menuState){const state=Drupal.solo.menuState.getMenuState(navigationMenubar);isOpen=state.isOpen;}else isOpen=navigationMenubar.classList.contains('toggled');if(!isOpen){if(hamburgerIconChild)Drupal.solo.menuState.setExpanded(hamburgerIconChild,true,COMPONENT_NAME);hamburgerIcon.classList.add('toggled');openMobileMenu(navTagId);}else{if(hamburgerIconChild)Drupal.solo.menuState.setExpanded(hamburgerIconChild,false,COMPONENT_NAME);hamburgerIcon.classList.remove('toggled');closeMobileMenu(navTagId);}};const addAriaControlToButton=(hamburgerIcon)=>{if(!hamburgerIcon){console.warn('Solo Menu Mobile: Invalid hamburger icon in addAriaControlToButton');return;}const [hamburgerIconChild,navTagId]=getMobileNavType(hamburgerIcon);if(!navTagId||!hamburgerIconChild){console.warn('Solo Menu Mobile: Missing required elements in addAriaControlToButton');return;}const escapedNavId=Drupal.solo.escapeSelector(navTagId);if(!escapedNavId){console.error('Solo Menu Mobile: Invalid navigation ID in addAriaControlToButton',navTagId);return;}const responsiveNav=document.querySelector(`#${escapedNavId} .navigation__responsive`);if(!responsiveNav){console.warn('Solo Menu Mobile: Responsive navigation not found for',navTagId);return;}const ariaControl=responsiveNav.getAttribute('id');if(ariaControl){const currentWidth=getCurrentWidth();if(currentWidth<=brNum)if(Drupal.solo.menuState)Drupal.solo.menuState.setAriaAttribute(hamburgerIconChild,'aria-controls',ariaControl,COMPONENT_NAME);else hamburgerIconChild.setAttribute('aria-controls',ariaControl);else hamburgerIconChild.removeAttribute('aria-controls');}else console.warn('Solo Menu Mobile: Responsive navigation missing ID attribute');};const updateHamburgerTabindex=(hamburgerIcons)=>{const currentWidth=getCurrentWidth();hamburgerIcons.forEach((button)=>{Drupal.solo.menuState.setTabindex(button,currentWidth<=brNum?'0':'-1',COMPONENT_NAME);});};const updateTabindexForLargeScreens=()=>{const currentWidth=getCurrentWidth();if(currentWidth>brNum){const menuElement=document.querySelector('.navigation__responsive');if(menuElement){updateFirstLevelTabindex(menuElement,'0');updateAriaHidden(menuElement,'false');const menubar=menuElement.querySelector('.navigation__menubar');if(menubar)Drupal.solo.setInert(menubar,false);const submenus=menuElement.querySelectorAll('.sub__menu');submenus.forEach((submenu)=>{Drupal.solo.setInert(submenu,false);});}}};const closeOnResize=(hamburgerIcon)=>{const [hamburgerIconChild,navTagId]=getMobileNavType(hamburgerIcon);if(!navTagId)return;if(hamburgerIconChild)Drupal.solo.menuState.setExpanded(hamburgerIconChild,false,COMPONENT_NAME);hamburgerIcon.classList.remove('toggled');closeMobileMenu(navTagId);};const resetMenusOnResize=(hamburgerIcons)=>{hamburgerIcons?.forEach((hamburgerIcon)=>{closeOnResize(hamburgerIcon);});};function processHamburgerIcons(hamburgerIcons){hamburgerIcons.forEach((hamburgerIcon)=>{addAriaControlToButton(hamburgerIcon);});}function updateMenuStates(hamburgerIcons){processHamburgerIcons(hamburgerIcons);updateHamburgerTabindex(hamburgerIcons);updateTabindexForLargeScreens();}function createResizeHandler(hamburgerIcons){return (screenInfo)=>{currentLayout=Drupal.solo.getLayout();const isSmallScreen=screenInfo?screenInfo.isSmallScreen:(getCurrentWidth()<=brNum);if(isSmallScreen&&previousLayout!==currentLayout){resetMenusOnResize(hamburgerIcons);previousLayout=currentLayout;}if(!isSmallScreen)document.querySelectorAll('.navigation__menubar, .sub__menu').forEach((element)=>{Drupal.solo.setInert(element,false);});updateMenuStates(hamburgerIcons);};}const clickHandlers=new WeakMap();function initHamburgerMenu(hamburgerIcons){hamburgerIcons.forEach((hamburgerIcon)=>{const handler=()=>{Drupal.solo.clickedHandler(()=>{hamburgerIconIsClicked(hamburgerIcon);});};clickHandlers.set(hamburgerIcon,handler);hamburgerIcon.addEventListener('click',handler);});updateMenuStates(hamburgerIcons);if(Drupal.solo.menuState)Drupal.solo.menuState.addResizeHandler(COMPONENT_NAME,createResizeHandler(hamburgerIcons),250);else{let resizeTimer;const onResize=()=>{clearTimeout(resizeTimer);resizeTimer=setTimeout(()=>{createResizeHandler(hamburgerIcons)();},250);};window.addEventListener('resize',onResize);Drupal.solo._mobileResizeHandler=onResize;}const cleanupObserver=Drupal.solo.setupListenerCleanup(clickHandlers);if(hamburgerIcons.length>0&&cleanupObserver)hamburgerIcons[0]._cleanupObserver=cleanupObserver;}Drupal.behaviors.mobileMenu={attach:function(context){const hamburgerIcons=once('soloHamburgerInit','.mobile-nav button',context);if(hamburgerIcons.length>0)initHamburgerMenu(hamburgerIcons);else window.addEventListener('load',()=>{const fallbackIcons=once('soloHamburgerLateInit','.mobile-nav button',document);if(fallbackIcons.length>0)initHamburgerMenu(fallbackIcons);});},detach:function(context,settings,trigger){if(trigger==='unload'){const hamburgerIcons=once.filter('soloHamburgerInit','.mobile-nav button',context).concat(once.filter('soloHamburgerLateInit','.mobile-nav button'));hamburgerIcons.forEach((icon)=>{const handler=clickHandlers.get(icon);if(handler){icon.removeEventListener('click',handler);clickHandlers.delete(icon);}});if(hamburgerIcons[0]?._cleanupObserver)hamburgerIcons[0]._cleanupObserver.disconnect();if(Drupal.solo._mobileResizeHandler){window.removeEventListener('resize',Drupal.solo._mobileResizeHandler);delete Drupal.solo._mobileResizeHandler;}if(Drupal.solo.menuState)Drupal.solo.menuState.unregisterComponent(COMPONENT_NAME);}}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';const COMPONENT_NAME='sidebar';let focusVisibleHandlers=[];Drupal.solo=Drupal.solo||{};if(Drupal.solo.menuState)Drupal.solo.menuState.registerComponent(COMPONENT_NAME,{name:'Solo Sidebar Menu',version:'1.0'});const initFocusVisible=()=>{try{document.querySelector(':focus-visible');}catch(e){let hadKeyboardEvent=true;const keyboardEvents=['keydown','keyup'];const pointerEvents=['mousedown','mouseup','touchstart','touchend'];const keyHandler=()=>{hadKeyboardEvent=true;};const pointerHandler=()=>{hadKeyboardEvent=false;};const focusHandler=(e)=>{if(hadKeyboardEvent||e.target.matches(':focus-visible'))e.target.classList.add('focus-visible');};const blurHandler=(e)=>{e.target.classList.remove('focus-visible');};keyboardEvents.forEach((event)=>{document.addEventListener(event,keyHandler,true);focusVisibleHandlers.push({event,handler:keyHandler,capture:true});});pointerEvents.forEach((event)=>{document.addEventListener(event,pointerHandler,true);focusVisibleHandlers.push({event,handler:pointerHandler,capture:true});});document.addEventListener('focus',focusHandler,true);focusVisibleHandlers.push({event:'focus',handler:focusHandler,capture:true});document.addEventListener('blur',blurHandler,true);focusVisibleHandlers.push({event:'blur',handler:blurHandler,capture:true});}};const eventManager={listeners:new Map(),on(element,eventType,namespace,handler){const key=`${eventType}.${namespace}`;if(!this.listeners.has(element))this.listeners.set(element,new Map());const elementListeners=this.listeners.get(element);if(elementListeners.has(key))this.off(element,eventType,namespace);elementListeners.set(key,handler);element.addEventListener(eventType,handler);},off(element,eventType,namespace){const key=`${eventType}.${namespace}`;const elementListeners=this.listeners.get(element);if(elementListeners&&elementListeners.has(key)){const handler=elementListeners.get(key);element.removeEventListener(eventType,handler);elementListeners.delete(key);if(elementListeners.size===0)this.listeners.delete(element);}},offAll(element,namespace=null){const elementListeners=this.listeners.get(element);if(!elementListeners)return;elementListeners.forEach((handler,key)=>{if(!namespace||key.endsWith(`.${namespace}`)){const [eventType]=key.split('.');element.removeEventListener(eventType,handler);elementListeners.delete(key);}});if(elementListeners.size===0)this.listeners.delete(element);}};initFocusVisible();const verticalNav=document.getElementById('primary-sidebar-menu');if(verticalNav){if(!verticalNav.id){console.warn('Solo Menu Side: Sidebar menu missing ID attribute');return;}const openDuration=Drupal.solo.animations.slideDown||400;const closeDuration=Drupal.solo.animations.slideUp||350;const closeBtns=document.querySelectorAll('.sidebar-button-close>button');const openBtns=document.querySelectorAll('.sidebar-button-open>button');const firstLevelSelector='#primary-sidebar-menu .nav__menubar-item > a, #primary-sidebar-menu .nav__menubar-item > button';let cachedFocusableElements=null;let lastFocusedElement=null;const updateFocusableElementsCache=()=>{cachedFocusableElements=Array.from(verticalNav.querySelectorAll(firstLevelSelector)).filter((el)=>el.getAttribute('tabindex')==='0');closeBtns.forEach((button)=>{if(button.getAttribute('tabindex')==='0')cachedFocusableElements.push(button);});};const sideMenubarCloseOpen=(buttons,callback,context)=>{buttons.forEach((button)=>{if(button&&context.contains(button))once('solo-sidebar-button',button).forEach(()=>{eventManager.on(button,'click','solo.sidebar',callback);});});};const setAriaExpanded=(elements,value)=>{if(elements instanceof NodeList||Array.isArray(elements))elements.forEach((el)=>{if(el&&el instanceof HTMLElement)Drupal.solo.menuState.setExpanded(el,value==='true',COMPONENT_NAME);});else{if(elements&&elements instanceof HTMLElement)Drupal.solo.menuState.setExpanded(elements,value==='true',COMPONENT_NAME);}};const setAriaHidden=(el,value)=>{if(!el||!(el instanceof HTMLElement))return;const menubar=el.querySelector('.navigation__sidebar, .nav__menubar');if(menubar)Drupal.solo.menuState.setHidden(menubar,value==='true',COMPONENT_NAME);else Drupal.solo.menuState.setHidden(el,value==='true',COMPONENT_NAME);};const focusFirstInteractiveElement=()=>{const firstInteractiveElement=verticalNav.querySelector(firstLevelSelector);if(firstInteractiveElement)firstInteractiveElement.focus();};const updateTabindex=(isOpen)=>{Drupal.solo.menuState.updateMenuTabindex(verticalNav,isOpen,COMPONENT_NAME);closeBtns.forEach((button)=>{Drupal.solo.menuState.setTabindex(button,isOpen?'0':'-1',COMPONENT_NAME);});cachedFocusableElements=null;};const trapFocus=(event)=>{const isTab=event.key==='Tab'||event.code==='Tab';const isEscape=event.key==='Escape'||event.code==='Escape'||event.keyCode===27;if(!isTab&&!isEscape)return;if(isEscape){event.preventDefault();sideMenubarToggleNav(false);if(lastFocusedElement&&document.contains(lastFocusedElement))lastFocusedElement.focus();return;}if(isTab){if(!cachedFocusableElements)updateFocusableElementsCache();const currentIndex=cachedFocusableElements.indexOf(document.activeElement);let nextIndex;if(event.shiftKey)nextIndex=currentIndex>0?currentIndex-1:cachedFocusableElements.length-1;else nextIndex=currentIndex<cachedFocusableElements.length-1?currentIndex+1:0;event.preventDefault();if(cachedFocusableElements[nextIndex])cachedFocusableElements[nextIndex].focus();}};const outsideClickListener=(event)=>{if(verticalNav&&!verticalNav.contains(event.target)&&!event.target.closest('.sidebar-button-open'))sideMenubarToggleNav(false);};const sideMenubarToggleNav=(isOpen)=>{const duration=isOpen?Drupal.solo.animations.slideDown:Drupal.solo.animations.slideUp;verticalNav.style.setProperty('--solo-sidebar-speed',`${duration}ms`);closeBtns.forEach((btn)=>{if(btn&&btn instanceof HTMLElement)Drupal.solo.menuState.setExpanded(btn,isOpen,COMPONENT_NAME);});openBtns.forEach((btn)=>{if(btn&&btn instanceof HTMLElement)Drupal.solo.menuState.setExpanded(btn,isOpen,COMPONENT_NAME);});updateTabindex(isOpen);if(isOpen){lastFocusedElement=document.activeElement;Drupal.solo.menuState.setHidden(verticalNav,false,COMPONENT_NAME);Drupal.solo.setInert(verticalNav,false);if(Drupal.solo.menuState)Drupal.solo.menuState.coordinateMenuOperation('open',verticalNav,COMPONENT_NAME);else verticalNav.classList.add('toggled');focusFirstInteractiveElement();eventManager.on(document,'keydown','solo.sidebar.focus',trapFocus);eventManager.on(document,'click','solo.sidebar.outside',outsideClickListener);}else{if(verticalNav.contains(document.activeElement)){document.activeElement.blur();if(lastFocusedElement&&document.contains(lastFocusedElement))lastFocusedElement.focus();}if(Drupal.solo.menuState)Drupal.solo.menuState.coordinateMenuOperation('close',verticalNav,COMPONENT_NAME);else verticalNav.classList.remove('toggled');const subMenus=verticalNav.querySelectorAll('.navigation__sidebar li ul.sub__menu');subMenus?.forEach((subMenu)=>Drupal.solo.hideSubMenus(subMenu,COMPONENT_NAME));eventManager.off(document,'keydown','solo.sidebar.focus');eventManager.off(document,'click','solo.sidebar.outside');cachedFocusableElements=null;Drupal.solo.menuState.setHidden(verticalNav,true,COMPONENT_NAME);Drupal.solo.setInert(verticalNav,true);}};Drupal.solo.sideMenubarToggleNav=sideMenubarToggleNav;function addOutsideClickListener(enable){if(enable===true&&verticalNav.classList.contains('toggled'))eventManager.on(document,'click','solo.sidebar.outside',outsideClickListener);else eventManager.off(document,'click','solo.sidebar.outside');}Drupal.solo.addOutsideClickListener=addOutsideClickListener;Drupal.behaviors.soloPrimarySideMenu={attach:function(context,settings){once('solo-sidebar-init','#primary-sidebar-menu',context).forEach(()=>{sideMenubarCloseOpen(closeBtns,()=>sideMenubarToggleNav(false),context);sideMenubarCloseOpen(openBtns,()=>sideMenubarToggleNav(true),context);if(verticalNav.classList.contains('toggled')){updateTabindex(true);eventManager.on(document,'keydown','solo.sidebar.focus',trapFocus);eventManager.on(document,'click','solo.sidebar.outside',outsideClickListener);}else updateTabindex(false);});},detach:function(context,settings,trigger){if(trigger==='unload'){eventManager.off(document,'click','solo.sidebar.outside');eventManager.off(document,'keydown','solo.sidebar.focus');const buttons=context.querySelectorAll('.sidebar-button-close>button, .sidebar-button-open>button');buttons.forEach((button)=>{eventManager.offAll(button,'solo.sidebar');});focusVisibleHandlers.forEach(({event,handler,capture})=>{document.removeEventListener(event,handler,capture);});focusVisibleHandlers=[];cachedFocusableElements=null;lastFocusedElement=null;if(Drupal.solo.menuState)Drupal.solo.menuState.unregisterComponent(COMPONENT_NAME);}}};}})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';const COMPONENT_NAME='repositions';const SUBMENU_BUFFER=30;const RESIZE_DEBOUNCE_DELAY=150;let resizeHandler=null;if(Drupal.solo.menuState)Drupal.solo.menuState.registerComponent(COMPONENT_NAME,{name:'Solo Menu Repositions',version:'1.0'});Drupal.behaviors.soloMenuFix={attach:function(context){const breakpoint=Drupal.solo.getBreakpointNumber('mn');const windowWidth=window.innerWidth;if(windowWidth<breakpoint)return;function getWindowWidth(){if(Drupal.solo.menuState&&Drupal.solo.menuState.getCurrentWidth)return Drupal.solo.menuState.getCurrentWidth();return window.innerWidth;}function getLiWidth(li){return li.offsetWidth;}function getLiPosition(li){return li.getBoundingClientRect();}function getSubmenuWidth(submenu){return submenu.offsetWidth;}function getSubmenuPosition(submenu){return submenu.getBoundingClientRect();}function getSpaceLeft(liRect){return liRect.left;}function getSpaceRight(liRect,windowWidth){return windowWidth-liRect.right;}function adjustSecondLevelSubmenu(li){const windowWidth=getWindowWidth();if(windowWidth<breakpoint)return;const submenu=li.querySelector(':scope > .sub__menu');if(!submenu)return;submenu.style.visibility='hidden';const liRect=getLiPosition(li);const submenuWidth=getSubmenuWidth(submenu);const spaceLeft=getSpaceLeft(liRect);const spaceRight=getSpaceRight(liRect,windowWidth);if(submenuWidth+SUBMENU_BUFFER>spaceRight){submenu.style.left='auto';submenu.style.right='0';}else if(submenuWidth+SUBMENU_BUFFER>spaceLeft){submenu.style.right='auto';submenu.style.left='0';}else{submenu.style.left='';submenu.style.right='';}submenu.style.visibility='visible';}function adjustThirdLevelSubmenu(li){const windowWidth=getWindowWidth();if(windowWidth<breakpoint)return;const submenu=li.querySelector(':scope > .sub__menu');if(!submenu)return;const parentLi=li.closest('li.has-sub__menu');if(!parentLi)return;submenu.style.visibility='hidden';const parentRect=getLiPosition(parentLi);const submenuWidth=getSubmenuWidth(submenu);const spaceLeft=getSpaceLeft(parentRect);const spaceRight=getSpaceRight(parentRect,windowWidth);const fourthLevelLi=submenu.querySelector('li.has-sub__menu');let fourthLevelWidth=0;if(fourthLevelLi){const fourthSubmenu=fourthLevelLi.querySelector(':scope > .sub__menu');if(fourthSubmenu){const originalDisplay=fourthSubmenu.style.display;fourthSubmenu.style.visibility='hidden';fourthSubmenu.style.display='block';fourthLevelWidth=getSubmenuWidth(fourthSubmenu);fourthSubmenu.style.display=originalDisplay;fourthSubmenu.style.visibility='';}}const totalNeededWidth=submenuWidth+fourthLevelWidth+SUBMENU_BUFFER;if(totalNeededWidth>spaceRight&&spaceLeft>spaceRight){submenu.style.left='auto';submenu.style.right='100%';submenu.dataset.flipped='left';li.classList.add('submenu-flipped-left');li.classList.remove('submenu-flipped-right');}else if(submenuWidth+SUBMENU_BUFFER>spaceLeft){submenu.style.right='auto';submenu.style.left='100%';submenu.dataset.flipped='right';li.classList.add('submenu-flipped-right');li.classList.remove('submenu-flipped-left');}else{submenu.style.left='';submenu.style.right='';}submenu.style.visibility='visible';}function adjustFourthLevelSubmenu(li){const windowWidth=getWindowWidth();if(windowWidth<breakpoint)return;const submenu=li.querySelector(':scope > .sub__menu');if(!submenu)return;const parentLi=li.closest('ul.sub__menu').closest('li.has-sub__menu');if(!parentLi)return;const parentSubmenu=parentLi.querySelector(':scope > .sub__menu');if(!parentSubmenu)return;submenu.style.visibility='hidden';const isParentFlippedLeft=parentSubmenu.dataset.flipped==='left';if(isParentFlippedLeft){submenu.style.left='auto';submenu.style.right='100%';}else{submenu.style.right='auto';submenu.style.left='100%';}submenu.style.visibility='visible';}function applySubmenuFix(menuSelector,adjustFunction){once('soloMenuFix',document.querySelectorAll(menuSelector,context)).forEach((li)=>{const button=li.querySelector(':scope > button.dropdown-toggler');const submenu=li.querySelector(':scope > .sub__menu');if(button&&submenu){if(!button.hasAttribute('aria-haspopup'))button.setAttribute('aria-haspopup','true');if(!button.hasAttribute('aria-expanded'))button.setAttribute('aria-expanded','false');if(!submenu.hasAttribute('aria-hidden'))submenu.setAttribute('aria-hidden','true');}['mouseenter','click'].forEach((eventType)=>{li.addEventListener(eventType,function(){adjustFunction(this);});});li.addEventListener('keydown',function(event){if(event.key==='Enter'||event.key===' ')if(event.target===button){event.preventDefault();adjustFunction(this);}});li.dataset.soloMenuHandler='true';});}applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu',adjustSecondLevelSubmenu);applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu > ul > li.has-sub__menu',adjustThirdLevelSubmenu);applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu > ul > li.has-sub__menu > ul > li.has-sub__menu',adjustFourthLevelSubmenu);function handleResize(){if(window.innerWidth>=breakpoint){applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu',adjustSecondLevelSubmenu);applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu > ul > li.has-sub__menu',adjustThirdLevelSubmenu);applySubmenuFix('.primary-menu .navigation__primary > li.has-sub__menu > ul > li.has-sub__menu > ul > li.has-sub__menu',adjustFourthLevelSubmenu);}}resizeHandler=handleResize;window.addEventListener('resize',resizeHandler);},detach:function(context,settings,trigger){if(trigger==='unload'){if(Drupal.solo.menuState)Drupal.solo.menuState.unregisterComponent(COMPONENT_NAME);if(resizeHandler){window.removeEventListener('resize',resizeHandler);resizeHandler=null;}}}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';const COMPONENT_NAME='scripts';if(Drupal.solo.menuState)Drupal.solo.menuState.registerComponent(COMPONENT_NAME,{name:'Solo Menu Scripts',version:'1.0'});Drupal.behaviors.globalMenu={attach:function(context,settings){const menus=once('solo-menu-init','#primary-menu',context);menus.forEach((mainNavigation)=>{if(!mainNavigation.querySelector('.solo-inner .navigation__menubar'))return;let origOffsetY=mainNavigation.offsetTop;let scrollTicking=false;const handleScroll=()=>{if(!scrollTicking){window.requestAnimationFrame(()=>{mainNavigation.classList.toggle('solo-sticky',window.scrollY>origOffsetY);scrollTicking=false;});scrollTicking=true;}};if(Drupal.solo.menuState)Drupal.solo.menuState.addResizeHandler(COMPONENT_NAME,(screenInfo)=>{origOffsetY=mainNavigation.offsetTop;},250);else{let resizeTimeout;const handleResize=()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{origOffsetY=mainNavigation.offsetTop;},250);};mainNavigation._soloResizeHandler=handleResize;window.addEventListener('resize',handleResize);}mainNavigation._soloHandlers={scroll:handleScroll};window.addEventListener('scroll',handleScroll,{passive:true});});const submenus=once('solo-submenu-bg','.solo-inner nav .navigation__menubar ul',context);submenus.forEach((submenu)=>{const closestParent=submenu.closest('.page-wrapper > div, .page-wrapper > header');if(closestParent){const bgColor=window.getComputedStyle(closestParent).backgroundColor;submenu.style.backgroundColor=bgColor||'transparent';}});},detach:function(context,settings,trigger){if(trigger==='unload'){const menus=once.find('solo-menu-init',context);menus.forEach((mainNavigation)=>{if(mainNavigation._soloHandlers?.scroll){window.removeEventListener('scroll',mainNavigation._soloHandlers.scroll);delete mainNavigation._soloHandlers.scroll;}if(mainNavigation._soloResizeHandler&&!Drupal.solo.menuState){window.removeEventListener('resize',mainNavigation._soloResizeHandler);delete mainNavigation._soloResizeHandler;}});if(Drupal.solo.menuState)Drupal.solo.menuState.unregisterComponent(COMPONENT_NAME);}}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';Drupal.behaviors.soloSearchBlock={attach:function(context){const contentTypes=drupalSettings?.solo?.searchContentTypes;if(contentTypes&&Object.keys(contentTypes).length>0){const searchBlockForms=once('solo-search-block','.solo-search-block-form',context);searchBlockForms.forEach((searchBlockForm)=>{searchBlockForm.addEventListener('submit',function(event){event.preventDefault();const searchInputElement=searchBlockForm.querySelector('input[name="keys"]');if(!searchInputElement||!searchInputElement.value.trim())return;const searchInput=searchInputElement.value.trim();let actionUrl=`/search/node?keys=${encodeURIComponent(searchInput)}`;Object.entries(contentTypes).forEach(([key,value],index)=>{const filterKey=`f[${index}]`;const filterValue=`type:${value}`;actionUrl+=`&${encodeURIComponent(filterKey)}=${encodeURIComponent(filterValue)}`;});if(!actionUrl.includes('advanced-form=1'))actionUrl+=`&advanced-form=1`;window.location.href=actionUrl;});});}}};})(Drupal,drupalSettings,once);;
((Drupal,drupalSettings,once)=>{'use strict';Drupal.behaviors.soloSubTheme={attach:(context,settings)=>{}};})(Drupal,drupalSettings,once);;
(function($,Drupal,drupalSettings){const pathInfo=drupalSettings.path;const escapeAdminPath=sessionStorage.getItem('escapeAdminPath');const windowLocation=window.location;if(!pathInfo.currentPathIsAdmin&&!windowLocation.search.includes('destination='))sessionStorage.setItem('escapeAdminPath',windowLocation);Drupal.behaviors.escapeAdmin={attach(){const toolbarEscape=once('escapeAdmin','[data-toolbar-escape-admin]');if(toolbarEscape.length&&pathInfo.currentPathIsAdmin&&escapeAdminPath!==null)$(toolbarEscape).attr('href',escapeAdminPath);}};})(jQuery,Drupal,drupalSettings);;
